{"format_version":"0.1","terraform_version":"0.12.28","variables":{"ami":{"value":"ami-09a5b0b7edf08843d"},"availability_zone":{"value":"us-west-2a"},"availability_zone2":{"value":"us-west-2b"},"company_name":{"value":"pb"},"dbname":{"value":"db1"},"environment":{"value":"pbmydevsecops5555"},"password":{"value":"Aa1234321Bb"},"profile":{"value":"default"},"region":{"value":"us-west-2"}},"planned_values":{"outputs":{"db_app_public_dns":{"sensitive":false},"db_endpoint":{"sensitive":false},"ec2_public_dns":{"sensitive":false},"endpoint":{"sensitive":false},"kubeconfig-certificate-authority-data":{"sensitive":false},"public_subnet":{"sensitive":false},"public_subnet2":{"sensitive":false},"username":{"sensitive":false,"value":"068009473781-pb-pbmydevsecops5555-user"},"vpc_id":{"sensitive":false}},"root_module":{"resources":[{"address":"aws_db_instance.default","mode":"managed","type":"aws_db_instance","name":"default","provider_name":"aws","schema_version":1,"values":{"allocated_storage":20,"allow_major_version_upgrade":null,"apply_immediately":true,"auto_minor_version_upgrade":true,"backup_retention_period":0,"copy_tags_to_snapshot":false,"db_subnet_group_name":"sg-068009473781-pb-pbmydevsecops5555","delete_automated_backups":true,"deletion_protection":null,"domain":null,"domain_iam_role_name":null,"enabled_cloudwatch_logs_exports":null,"engine":"mysql","engine_version":"8.0","final_snapshot_identifier":null,"iam_database_authentication_enabled":null,"identifier":"rds-068009473781-pb-pbmydevsecops5555","instance_class":"db.t3.micro","iops":null,"max_allocated_storage":null,"monitoring_interval":0,"multi_az":false,"name":"db1","option_group_name":"og-068009473781-pb-pbmydevsecops5555","parameter_group_name":"pg-068009473781-pb-pbmydevsecops5555","password":"Aa1234321Bb","performance_insights_enabled":false,"publicly_accessible":true,"replicate_source_db":null,"s3_import":[],"security_group_names":null,"skip_final_snapshot":true,"snapshot_identifier":null,"storage_encrypted":false,"tags":{"Environment":"068009473781-pb-pbmydevsecops5555","Name":"068009473781-pb-pbmydevsecops5555-rds"},"timeouts":null,"username":"admin"}},{"address":"aws_db_option_group.default","mode":"managed","type":"aws_db_option_group","name":"default","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:rds:us-west-2:068009473781:og:og-068009473781-pb-pbmydevsecops5555","engine_name":"mysql","id":"og-068009473781-pb-pbmydevsecops5555","major_engine_version":"8.0","name":"og-068009473781-pb-pbmydevsecops5555","name_prefix":null,"option":[],"option_group_description":"Terraform OG","tags":{"Environment":"068009473781-pb-pbmydevsecops5555","Name":"068009473781-pb-pbmydevsecops5555-og"},"timeouts":null}},{"address":"aws_db_parameter_group.default","mode":"managed","type":"aws_db_parameter_group","name":"default","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:rds:us-west-2:068009473781:pg:pg-068009473781-pb-pbmydevsecops5555","description":"Terraform PG","family":"mysql8.0","id":"pg-068009473781-pb-pbmydevsecops5555","name":"pg-068009473781-pb-pbmydevsecops5555","name_prefix":null,"parameter":[{"apply_method":"immediate","name":"character_set_client","value":"utf8"},{"apply_method":"immediate","name":"character_set_server","value":"utf8"}],"tags":{"Environment":"068009473781-pb-pbmydevsecops5555","Name":"068009473781-pb-pbmydevsecops5555-pg"}}},{"address":"aws_db_subnet_group.default","mode":"managed","type":"aws_db_subnet_group","name":"default","provider_name":"aws","schema_version":0,"values":{"description":"Terraform DB Subnet Group","name":"sg-068009473781-pb-pbmydevsecops5555","tags":{"Environment":"068009473781-pb-pbmydevsecops5555","Name":"sg-068009473781-pb-pbmydevsecops5555"}}},{"address":"aws_ebs_snapshot.example_snapshot","mode":"managed","type":"aws_ebs_snapshot","name":"example_snapshot","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:ec2:us-west-2::snapshot/snap-0475e105b5899aa65","data_encryption_key_id":"","description":"068009473781-pb-pbmydevsecops5555-ebs-snapshot","encrypted":false,"id":"snap-0475e105b5899aa65","kms_key_id":"","owner_alias":"","owner_id":"068009473781","tags":{"Name":"068009473781-pb-pbmydevsecops5555-ebs-snapshot"},"timeouts":null,"volume_id":"vol-01a64c37b5281b8da","volume_size":1}},{"address":"aws_ebs_volume.web_host_storage","mode":"managed","type":"aws_ebs_volume","name":"web_host_storage","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:ec2:us-west-2:068009473781:volume/vol-01a64c37b5281b8da","availability_zone":"us-west-2a","encrypted":false,"id":"vol-01a64c37b5281b8da","iops":100,"kms_key_id":"","multi_attach_enabled":false,"outpost_arn":"","size":1,"snapshot_id":"","tags":{"Name":"068009473781-pb-pbmydevsecops5555-ebs"},"type":"gp2"}},{"address":"aws_ecr_repository.repository","mode":"managed","type":"aws_ecr_repository","name":"repository","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:ecr:us-west-2:068009473781:repository/068009473781-pb-pbmydevsecops5555-repository","id":"068009473781-pb-pbmydevsecops5555-repository","image_scanning_configuration":[{"scan_on_push":false}],"image_tag_mutability":"MUTABLE","name":"068009473781-pb-pbmydevsecops5555-repository","registry_id":"068009473781","repository_url":"068009473781.dkr.ecr.us-west-2.amazonaws.com/068009473781-pb-pbmydevsecops5555-repository","tags":{"Name":"068009473781-pb-pbmydevsecops5555-repository"},"timeouts":null}},{"address":"aws_eks_cluster.eks_cluster","mode":"managed","type":"aws_eks_cluster","name":"eks_cluster","provider_name":"aws","schema_version":0,"values":{"enabled_cluster_log_types":null,"encryption_config":[],"name":"068009473781-pb-pbmydevsecops5555-eks","role_arn":"arn:aws:iam::068009473781:role/068009473781-pb-pbmydevsecops5555-iam-for-eks","tags":null,"timeouts":null,"vpc_config":[{"endpoint_private_access":true,"endpoint_public_access":true,"security_group_ids":null}]}},{"address":"aws_elasticsearch_domain.monitoring-framework","mode":"managed","type":"aws_elasticsearch_domain","name":"monitoring-framework","provider_name":"aws","schema_version":0,"values":{"access_policies":"{\"Statement\":[{\"Action\":\"es:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Resource\":\"*\",\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}","advanced_options":{"rest.action.multi.allow_explicit_index":"true"},"advanced_security_options":[{"enabled":false,"internal_user_database_enabled":false,"master_user_options":[]}],"arn":"arn:aws:es:us-west-2:068009473781:domain/tg-pbmydevsecops5555-es","cluster_config":[{"dedicated_master_count":0,"dedicated_master_enabled":false,"dedicated_master_type":"","instance_count":1,"instance_type":"t2.small.elasticsearch","warm_count":0,"warm_enabled":false,"warm_type":"","zone_awareness_config":[],"zone_awareness_enabled":false}],"cognito_options":[{"enabled":false,"identity_pool_id":"","role_arn":"","user_pool_id":""}],"domain_endpoint_options":[{"enforce_https":false,"tls_security_policy":"Policy-Min-TLS-1-0-2019-07"}],"domain_id":"068009473781/tg-pbmydevsecops5555-es","domain_name":"tg-pbmydevsecops5555-es","ebs_options":[{"ebs_enabled":true,"iops":0,"volume_size":30,"volume_type":"gp2"}],"elasticsearch_version":"2.3","encrypt_at_rest":[{"enabled":false,"kms_key_id":""}],"endpoint":"search-tg-pbmydevsecops5555-es-xa7tn2nw6mx7aoxovo522pazvm.us-west-2.es.amazonaws.com","id":"arn:aws:es:us-west-2:068009473781:domain/tg-pbmydevsecops5555-es","kibana_endpoint":"search-tg-pbmydevsecops5555-es-xa7tn2nw6mx7aoxovo522pazvm.us-west-2.es.amazonaws.com/_plugin/kibana/","log_publishing_options":[],"node_to_node_encryption":[{"enabled":false}],"snapshot_options":[{"automated_snapshot_start_hour":0}],"tags":{},"timeouts":null,"vpc_options":[]}},{"address":"aws_elasticsearch_domain_policy.monitoring-framework-policy","mode":"managed","type":"aws_elasticsearch_domain_policy","name":"monitoring-framework-policy","provider_name":"aws","schema_version":0,"values":{"access_policies":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Action\":\"es:*\",\"Resource\":\"*\"}]}","domain_name":"tg-pbmydevsecops5555-es","id":"esd-policy-tg-pbmydevsecops5555-es"}},{"address":"aws_elb.weblb","mode":"managed","type":"aws_elb","name":"weblb","provider_name":"aws","schema_version":0,"values":{"access_logs":[],"connection_draining":true,"connection_draining_timeout":400,"cross_zone_load_balancing":true,"health_check":[{"healthy_threshold":2,"interval":30,"target":"HTTP:8000/","timeout":3,"unhealthy_threshold":2}],"idle_timeout":400,"listener":[{"instance_port":8000,"instance_protocol":"http","lb_port":80,"lb_protocol":"http","ssl_certificate_id":""}],"name":"weblb-terraform-elb","name_prefix":null,"tags":{"Name":"foobar-terraform-elb"}}},{"address":"aws_flow_log.vpcflowlogs","mode":"managed","type":"aws_flow_log","name":"vpcflowlogs","provider_name":"aws","schema_version":0,"values":{"eni_id":null,"iam_role_arn":null,"log_destination":"arn:aws:s3:::068009473781-pb-pbmydevsecops5555-flowlogs","log_destination_type":"s3","max_aggregation_interval":600,"subnet_id":null,"tags":{"Environment":"068009473781-pb-pbmydevsecops5555","Name":"068009473781-pb-pbmydevsecops5555-flowlogs"},"traffic_type":"ALL"}},{"address":"aws_iam_access_key.user","mode":"managed","type":"aws_iam_access_key","name":"user","provider_name":"aws","schema_version":0,"values":{"encrypted_secret":null,"id":"AKIAQ7VNOG325Y7WF5XN","key_fingerprint":null,"pgp_key":null,"secret":"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","ses_smtp_password":"AiVox4900VikMVa2C4VD5+xBF8BIV8axtDm0y1XkxEdU","ses_smtp_password_v4":"BCmpJZlEDuul7E/tAQYhfmejyptzppGkDE1ZyOJAjHpu","status":"Active","user":"068009473781-pb-pbmydevsecops5555-user"}},{"address":"aws_iam_instance_profile.ec2profile","mode":"managed","type":"aws_iam_instance_profile","name":"ec2profile","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:iam::068009473781:instance-profile/068009473781-pb-pbmydevsecops5555-profile","create_date":"2020-07-27T23:48:36Z","id":"068009473781-pb-pbmydevsecops5555-profile","name":"068009473781-pb-pbmydevsecops5555-profile","name_prefix":null,"path":"/","role":"068009473781-pb-pbmydevsecops5555-role","roles":["068009473781-pb-pbmydevsecops5555-role"],"unique_id":"AIPAQ7VNOG32SCJF57Y6O"}},{"address":"aws_iam_role.ec2role","mode":"managed","type":"aws_iam_role","name":"ec2role","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:iam::068009473781:role/068009473781-pb-pbmydevsecops5555-role","assume_role_policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}","create_date":"2020-07-27T23:48:33Z","description":"","force_detach_policies":false,"id":"068009473781-pb-pbmydevsecops5555-role","max_session_duration":3600,"name":"068009473781-pb-pbmydevsecops5555-role","name_prefix":null,"path":"/","permissions_boundary":null,"tags":{"Environment":"068009473781-pb-pbmydevsecops5555","Name":"068009473781-pb-pbmydevsecops5555-role"},"unique_id":"AROAQ7VNOG32Q7UWHRLRR"}},{"address":"aws_iam_role.iam_for_eks","mode":"managed","type":"aws_iam_role","name":"iam_for_eks","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:iam::068009473781:role/068009473781-pb-pbmydevsecops5555-iam-for-eks","assume_role_policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"eks.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}","create_date":"2020-07-27T23:48:32Z","description":"","force_detach_policies":false,"id":"068009473781-pb-pbmydevsecops5555-iam-for-eks","max_session_duration":3600,"name":"068009473781-pb-pbmydevsecops5555-iam-for-eks","name_prefix":null,"path":"/","permissions_boundary":null,"tags":{},"unique_id":"AROAQ7VNOG32R5D5X7D5M"}},{"address":"aws_iam_role.iam_for_lambda","mode":"managed","type":"aws_iam_role","name":"iam_for_lambda","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:iam::068009473781:role/068009473781-pb-pbmydevsecops5555-analysis-lambda","assume_role_policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}","create_date":"2020-07-27T23:48:32Z","description":"","force_detach_policies":false,"id":"068009473781-pb-pbmydevsecops5555-analysis-lambda","max_session_duration":3600,"name":"068009473781-pb-pbmydevsecops5555-analysis-lambda","name_prefix":null,"path":"/","permissions_boundary":null,"tags":{},"unique_id":"AROAQ7VNOG322JLVBOET2"}},{"address":"aws_iam_role_policy.ec2policy","mode":"managed","type":"aws_iam_role_policy","name":"ec2policy","provider_name":"aws","schema_version":0,"values":{"id":"068009473781-pb-pbmydevsecops5555-role:068009473781-pb-pbmydevsecops5555-policy","name":"068009473781-pb-pbmydevsecops5555-policy","name_prefix":null,"policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"s3:*\",\n        \"ec2:*\",\n        \"rds:*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    }\n  ]\n}\n","role":"068009473781-pb-pbmydevsecops5555-role"}},{"address":"aws_iam_role_policy_attachment.policy_attachment-AmazonEKSClusterPolicy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"policy_attachment-AmazonEKSClusterPolicy","provider_name":"aws","schema_version":0,"values":{"id":"068009473781-pb-pbmydevsecops5555-iam-for-eks-20200727234836030000000002","policy_arn":"arn:aws:iam::aws:policy/AmazonEKSClusterPolicy","role":"068009473781-pb-pbmydevsecops5555-iam-for-eks"}},{"address":"aws_iam_role_policy_attachment.policy_attachment-AmazonEKSServicePolicy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"policy_attachment-AmazonEKSServicePolicy","provider_name":"aws","schema_version":0,"values":{"id":"068009473781-pb-pbmydevsecops5555-iam-for-eks-20200727234836026300000001","policy_arn":"arn:aws:iam::aws:policy/AmazonEKSServicePolicy","role":"068009473781-pb-pbmydevsecops5555-iam-for-eks"}},{"address":"aws_iam_user.user","mode":"managed","type":"aws_iam_user","name":"user","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:iam::068009473781:user/068009473781-pb-pbmydevsecops5555-user","force_destroy":true,"id":"068009473781-pb-pbmydevsecops5555-user","name":"068009473781-pb-pbmydevsecops5555-user","path":"/","permissions_boundary":null,"tags":{"Environment":"068009473781-pb-pbmydevsecops5555","Name":"068009473781-pb-pbmydevsecops5555-user"},"unique_id":"AIDAQ7VNOG32QMFWCIOYE"}},{"address":"aws_iam_user_policy.userpolicy","mode":"managed","type":"aws_iam_user_policy","name":"userpolicy","provider_name":"aws","schema_version":0,"values":{"id":"068009473781-pb-pbmydevsecops5555-user:excess_policy","name":"excess_policy","name_prefix":null,"policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:*\",\n        \"s3:*\",\n        \"lambda:*\",\n        \"cloudwatch:*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    }\n  ]\n}\n","user":"068009473781-pb-pbmydevsecops5555-user"}},{"address":"aws_instance.db_app","mode":"managed","type":"aws_instance","name":"db_app","provider_name":"aws","schema_version":1,"values":{"ami":"ami-07e0762dd335c2557","credit_specification":[],"disable_api_termination":null,"ebs_optimized":null,"get_password_data":false,"hibernation":null,"iam_instance_profile":"068009473781-pb-pbmydevsecops5555-profile","instance_initiated_shutdown_behavior":null,"instance_type":"t2.nano","monitoring":null,"source_dest_check":true,"tags":{"Name":"068009473781-pb-pbmydevsecops5555-dbapp"},"timeouts":null,"user_data_base64":null}},{"address":"aws_instance.web_host","mode":"managed","type":"aws_instance","name":"web_host","provider_name":"aws","schema_version":1,"values":{"ami":"ami-09a5b0b7edf08843d","credit_specification":[],"disable_api_termination":null,"ebs_optimized":null,"get_password_data":false,"hibernation":null,"iam_instance_profile":null,"instance_initiated_shutdown_behavior":null,"instance_type":"t2.nano","monitoring":null,"source_dest_check":true,"tags":{"Name":"068009473781-pb-pbmydevsecops5555-ec2"},"timeouts":null,"user_data":"44c6c808e6449ee36dfcfc4ebd66c1b9634b40f2","user_data_base64":null}},{"address":"aws_internet_gateway.web_igw","mode":"managed","type":"aws_internet_gateway","name":"web_igw","provider_name":"aws","schema_version":0,"values":{"tags":{"Name":"068009473781-pb-pbmydevsecops5555-igw"}}},{"address":"aws_kms_alias.logs_key_alias","mode":"managed","type":"aws_kms_alias","name":"logs_key_alias","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:kms:us-west-2:068009473781:alias/068009473781-pb-pbmydevsecops5555-logs-bucket-key","id":"alias/068009473781-pb-pbmydevsecops5555-logs-bucket-key","name":"alias/068009473781-pb-pbmydevsecops5555-logs-bucket-key","name_prefix":null,"target_key_arn":"arn:aws:kms:us-west-2:068009473781:key/f381cd7e-b78a-4bcc-a45f-7aac32b01d02","target_key_id":"f381cd7e-b78a-4bcc-a45f-7aac32b01d02"}},{"address":"aws_kms_key.logs_key","mode":"managed","type":"aws_kms_key","name":"logs_key","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:kms:us-west-2:068009473781:key/f381cd7e-b78a-4bcc-a45f-7aac32b01d02","customer_master_key_spec":"SYMMETRIC_DEFAULT","deletion_window_in_days":7,"description":"068009473781-pb-pbmydevsecops5555-logs bucket key","enable_key_rotation":false,"id":"f381cd7e-b78a-4bcc-a45f-7aac32b01d02","is_enabled":true,"key_id":"f381cd7e-b78a-4bcc-a45f-7aac32b01d02","key_usage":"ENCRYPT_DECRYPT","policy":"{\"Id\":\"key-default-1\",\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::068009473781:root\"},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"}],\"Version\":\"2012-10-17\"}","tags":{}}},{"address":"aws_lambda_function.analysis_lambda","mode":"managed","type":"aws_lambda_function","name":"analysis_lambda","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:lambda:us-west-2:068009473781:function:068009473781-pb-pbmydevsecops5555-analysis","dead_letter_config":[],"description":"","environment":[{"variables":{"access_key":"AKIAIOSFODNN7EXAMPLE","secret_key":"wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY"}}],"file_system_config":[],"filename":"resources/lambda_function_payload.zip","function_name":"068009473781-pb-pbmydevsecops5555-analysis","handler":"exports.test","id":"068009473781-pb-pbmydevsecops5555-analysis","invoke_arn":"arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:068009473781:function:068009473781-pb-pbmydevsecops5555-analysis/invocations","kms_key_arn":"","last_modified":"2020-07-27T23:48:43.133+0000","layers":[],"memory_size":128,"publish":false,"qualified_arn":"arn:aws:lambda:us-west-2:068009473781:function:068009473781-pb-pbmydevsecops5555-analysis:$LATEST","reserved_concurrent_executions":-1,"role":"arn:aws:iam::068009473781:role/068009473781-pb-pbmydevsecops5555-analysis-lambda","runtime":"nodejs12.x","s3_bucket":null,"s3_key":null,"s3_object_version":null,"source_code_hash":"Fne61Y/F2pmVywaVqIYcztFMK3LNeMJKpWFNnxDdGTw=","source_code_size":195,"tags":{},"timeout":3,"timeouts":null,"tracing_config":[{"mode":"PassThrough"}],"version":"$LATEST","vpc_config":[]}},{"address":"aws_network_interface.web-eni","mode":"managed","type":"aws_network_interface","name":"web-eni","provider_name":"aws","schema_version":0,"values":{"description":null,"private_ips":["172.16.10.100"],"source_dest_check":true,"tags":{"Name":"068009473781-pb-pbmydevsecops5555-primary_network_interface"}}},{"address":"aws_route.public_internet_gateway","mode":"managed","type":"aws_route","name":"public_internet_gateway","provider_name":"aws","schema_version":0,"values":{"destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":null,"timeouts":{"create":"5m","delete":null},"transit_gateway_id":null,"vpc_peering_connection_id":null}},{"address":"aws_route_table.web_rtb","mode":"managed","type":"aws_route_table","name":"web_rtb","provider_name":"aws","schema_version":0,"values":{"tags":{"Name":"068009473781-pb-pbmydevsecops5555-rtb"}}},{"address":"aws_route_table_association.rtbassoc","mode":"managed","type":"aws_route_table_association","name":"rtbassoc","provider_name":"aws","schema_version":0,"values":{"gateway_id":null}},{"address":"aws_route_table_association.rtbassoc2","mode":"managed","type":"aws_route_table_association","name":"rtbassoc2","provider_name":"aws","schema_version":0,"values":{"gateway_id":null}},{"address":"aws_s3_bucket.data","mode":"managed","type":"aws_s3_bucket","name":"data","provider_name":"aws","schema_version":0,"values":{"acceleration_status":"","acl":"public-read","arn":"arn:aws:s3:::068009473781-pb-pbmydevsecops5555-data","bucket":"068009473781-pb-pbmydevsecops5555-data","bucket_domain_name":"068009473781-pb-pbmydevsecops5555-data.s3.amazonaws.com","bucket_prefix":null,"bucket_regional_domain_name":"068009473781-pb-pbmydevsecops5555-data.s3.us-west-2.amazonaws.com","cors_rule":[],"force_destroy":true,"grant":[],"hosted_zone_id":"Z3BJ6K6RIION7M","id":"068009473781-pb-pbmydevsecops5555-data","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":null,"region":"us-west-2","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[],"tags":{"Environment":"068009473781-pb-pbmydevsecops5555","Name":"068009473781-pb-pbmydevsecops5555-data"},"versioning":[{"enabled":false,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null}},{"address":"aws_s3_bucket.data_science","mode":"managed","type":"aws_s3_bucket","name":"data_science","provider_name":"aws","schema_version":0,"values":{"acceleration_status":"","acl":"private","arn":"arn:aws:s3:::068009473781-pb-pbmydevsecops5555-data-science","bucket":"068009473781-pb-pbmydevsecops5555-data-science","bucket_domain_name":"068009473781-pb-pbmydevsecops5555-data-science.s3.amazonaws.com","bucket_prefix":null,"bucket_regional_domain_name":"068009473781-pb-pbmydevsecops5555-data-science.s3.us-west-2.amazonaws.com","cors_rule":[],"force_destroy":true,"grant":[],"hosted_zone_id":"Z3BJ6K6RIION7M","id":"068009473781-pb-pbmydevsecops5555-data-science","lifecycle_rule":[],"logging":[{"target_bucket":"068009473781-pb-pbmydevsecops5555-logs","target_prefix":"log/"}],"object_lock_configuration":[],"policy":null,"region":"us-west-2","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[],"tags":{},"versioning":[{"enabled":true,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null}},{"address":"aws_s3_bucket.financials","mode":"managed","type":"aws_s3_bucket","name":"financials","provider_name":"aws","schema_version":0,"values":{"acceleration_status":"","acl":"private","arn":"arn:aws:s3:::068009473781-pb-pbmydevsecops5555-financials","bucket":"068009473781-pb-pbmydevsecops5555-financials","bucket_domain_name":"068009473781-pb-pbmydevsecops5555-financials.s3.amazonaws.com","bucket_prefix":null,"bucket_regional_domain_name":"068009473781-pb-pbmydevsecops5555-financials.s3.us-west-2.amazonaws.com","cors_rule":[],"force_destroy":true,"grant":[],"hosted_zone_id":"Z3BJ6K6RIION7M","id":"068009473781-pb-pbmydevsecops5555-financials","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":null,"region":"us-west-2","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[],"tags":{"Environment":"068009473781-pb-pbmydevsecops5555","Name":"068009473781-pb-pbmydevsecops5555-financials"},"versioning":[{"enabled":false,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null}},{"address":"aws_s3_bucket.flowbucket","mode":"managed","type":"aws_s3_bucket","name":"flowbucket","provider_name":"aws","schema_version":0,"values":{"acceleration_status":"","acl":"private","arn":"arn:aws:s3:::068009473781-pb-pbmydevsecops5555-flowlogs","bucket":"068009473781-pb-pbmydevsecops5555-flowlogs","bucket_domain_name":"068009473781-pb-pbmydevsecops5555-flowlogs.s3.amazonaws.com","bucket_prefix":null,"bucket_regional_domain_name":"068009473781-pb-pbmydevsecops5555-flowlogs.s3.us-west-2.amazonaws.com","cors_rule":[],"force_destroy":true,"grant":[],"hosted_zone_id":"Z3BJ6K6RIION7M","id":"068009473781-pb-pbmydevsecops5555-flowlogs","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":null,"region":"us-west-2","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[],"tags":{"Environment":"068009473781-pb-pbmydevsecops5555","Name":"068009473781-pb-pbmydevsecops5555-flowlogs"},"versioning":[{"enabled":false,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null}},{"address":"aws_s3_bucket.logs","mode":"managed","type":"aws_s3_bucket","name":"logs","provider_name":"aws","schema_version":0,"values":{"acceleration_status":"","acl":"log-delivery-write","arn":"arn:aws:s3:::068009473781-pb-pbmydevsecops5555-logs","bucket":"068009473781-pb-pbmydevsecops5555-logs","bucket_domain_name":"068009473781-pb-pbmydevsecops5555-logs.s3.amazonaws.com","bucket_prefix":null,"bucket_regional_domain_name":"068009473781-pb-pbmydevsecops5555-logs.s3.us-west-2.amazonaws.com","cors_rule":[],"force_destroy":true,"grant":[],"hosted_zone_id":"Z3BJ6K6RIION7M","id":"068009473781-pb-pbmydevsecops5555-logs","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":null,"region":"us-west-2","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"arn:aws:kms:us-west-2:068009473781:key/f381cd7e-b78a-4bcc-a45f-7aac32b01d02","sse_algorithm":"aws:kms"}]}]}],"tags":{"Environment":"068009473781-pb-pbmydevsecops5555","Name":"068009473781-pb-pbmydevsecops5555-logs"},"versioning":[{"enabled":true,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null}},{"address":"aws_s3_bucket.operations","mode":"managed","type":"aws_s3_bucket","name":"operations","provider_name":"aws","schema_version":0,"values":{"acceleration_status":"","acl":"private","arn":"arn:aws:s3:::068009473781-pb-pbmydevsecops5555-operations","bucket":"068009473781-pb-pbmydevsecops5555-operations","bucket_domain_name":"068009473781-pb-pbmydevsecops5555-operations.s3.amazonaws.com","bucket_prefix":null,"bucket_regional_domain_name":"068009473781-pb-pbmydevsecops5555-operations.s3.us-west-2.amazonaws.com","cors_rule":[],"force_destroy":true,"grant":[],"hosted_zone_id":"Z3BJ6K6RIION7M","id":"068009473781-pb-pbmydevsecops5555-operations","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":null,"region":"us-west-2","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[],"tags":{"Environment":"068009473781-pb-pbmydevsecops5555","Name":"068009473781-pb-pbmydevsecops5555-operations"},"versioning":[{"enabled":true,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null}},{"address":"aws_s3_bucket_object.data_object","mode":"managed","type":"aws_s3_bucket_object","name":"data_object","provider_name":"aws","schema_version":0,"values":{"acl":"private","bucket":"068009473781-pb-pbmydevsecops5555-data","cache_control":"","content":null,"content_base64":null,"content_disposition":"","content_encoding":"","content_language":"","content_type":"binary/octet-stream","etag":"e0503b22cec66928e560c4351a091dc3","force_destroy":false,"id":"customer-master.xlsx","key":"customer-master.xlsx","kms_key_id":null,"metadata":{},"object_lock_legal_hold_status":"","object_lock_mode":"","object_lock_retain_until_date":"","server_side_encryption":"","source":"resources/customer-master.xlsx","storage_class":"STANDARD","tags":{"Environment":"068009473781-pb-pbmydevsecops5555","Name":"068009473781-pb-pbmydevsecops5555-customer-master"},"version_id":"","website_redirect":""}},{"address":"aws_security_group.default","mode":"managed","type":"aws_security_group","name":"default","provider_name":"aws","schema_version":1,"values":{"description":"Managed by Terraform","name":"068009473781-pb-pbmydevsecops5555-rds-sg","name_prefix":null,"revoke_rules_on_delete":false,"tags":{"Environment":"068009473781-pb-pbmydevsecops5555","Name":"068009473781-pb-pbmydevsecops5555-rds-sg"},"timeouts":null}},{"address":"aws_security_group.web-node","mode":"managed","type":"aws_security_group","name":"web-node","provider_name":"aws","schema_version":1,"values":{"description":"068009473781-pb-pbmydevsecops5555 Security Group","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22},{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":80,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":80}],"name":"068009473781-pb-pbmydevsecops5555-sg","name_prefix":null,"revoke_rules_on_delete":false,"tags":null,"timeouts":null}},{"address":"aws_security_group_rule.egress","mode":"managed","type":"aws_security_group_rule","name":"egress","provider_name":"aws","schema_version":2,"values":{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","self":false,"to_port":0,"type":"egress"}},{"address":"aws_security_group_rule.ingress","mode":"managed","type":"aws_security_group_rule","name":"ingress","provider_name":"aws","schema_version":2,"values":{"cidr_blocks":["172.16.0.0/16"],"description":null,"from_port":3306,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","self":false,"to_port":3306,"type":"ingress"}},{"address":"aws_subnet.eks_subnet1","mode":"managed","type":"aws_subnet","name":"eks_subnet1","provider_name":"aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-west-2a","cidr_block":"10.10.10.0/24","map_public_ip_on_launch":true,"outpost_arn":null,"tags":{"Name":"068009473781-pb-pbmydevsecops5555-eks-subnet","kubernetes.io/cluster/068009473781-pb-pbmydevsecops5555-eks":"shared"},"timeouts":null}},{"address":"aws_subnet.eks_subnet2","mode":"managed","type":"aws_subnet","name":"eks_subnet2","provider_name":"aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-west-2b","cidr_block":"10.10.11.0/24","map_public_ip_on_launch":true,"outpost_arn":null,"tags":{"Name":"068009473781-pb-pbmydevsecops5555-eks-subnet2","kubernetes.io/cluster/068009473781-pb-pbmydevsecops5555-eks":"shared"},"timeouts":null}},{"address":"aws_subnet.web_subnet","mode":"managed","type":"aws_subnet","name":"web_subnet","provider_name":"aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-west-2a","cidr_block":"172.16.10.0/24","map_public_ip_on_launch":true,"outpost_arn":null,"tags":{"Name":"068009473781-pb-pbmydevsecops5555-subnet"},"timeouts":null}},{"address":"aws_subnet.web_subnet2","mode":"managed","type":"aws_subnet","name":"web_subnet2","provider_name":"aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-west-2b","cidr_block":"172.16.11.0/24","map_public_ip_on_launch":true,"outpost_arn":null,"tags":{"Name":"068009473781-pb-pbmydevsecops5555-subnet2"},"timeouts":null}},{"address":"aws_volume_attachment.ebs_att","mode":"managed","type":"aws_volume_attachment","name":"ebs_att","provider_name":"aws","schema_version":0,"values":{"device_name":"/dev/sdh","force_detach":null,"skip_destroy":null,"volume_id":"vol-01a64c37b5281b8da"}},{"address":"aws_vpc.eks_vpc","mode":"managed","type":"aws_vpc","name":"eks_vpc","provider_name":"aws","schema_version":1,"values":{"assign_generated_ipv6_cidr_block":false,"cidr_block":"10.10.0.0/16","enable_dns_hostnames":true,"enable_dns_support":true,"instance_tenancy":"default","tags":{"Name":"068009473781-pb-pbmydevsecops5555-eks-vpc"}}},{"address":"aws_vpc.web_vpc","mode":"managed","type":"aws_vpc","name":"web_vpc","provider_name":"aws","schema_version":1,"values":{"assign_generated_ipv6_cidr_block":false,"cidr_block":"172.16.0.0/16","enable_dns_hostnames":true,"enable_dns_support":true,"instance_tenancy":"default","tags":{"Name":"068009473781-pb-pbmydevsecops5555-vpc"}}},{"address":"null_resource.push_image","mode":"managed","type":"null_resource","name":"push_image","provider_name":"null","schema_version":0,"values":{"triggers":null}}]}},"resource_changes":[{"address":"aws_db_instance.default","mode":"managed","type":"aws_db_instance","name":"default","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"allocated_storage":20,"allow_major_version_upgrade":null,"apply_immediately":true,"auto_minor_version_upgrade":true,"backup_retention_period":0,"copy_tags_to_snapshot":false,"db_subnet_group_name":"sg-068009473781-pb-pbmydevsecops5555","delete_automated_backups":true,"deletion_protection":null,"domain":null,"domain_iam_role_name":null,"enabled_cloudwatch_logs_exports":null,"engine":"mysql","engine_version":"8.0","final_snapshot_identifier":null,"iam_database_authentication_enabled":null,"identifier":"rds-068009473781-pb-pbmydevsecops5555","instance_class":"db.t3.micro","iops":null,"max_allocated_storage":null,"monitoring_interval":0,"multi_az":false,"name":"db1","option_group_name":"og-068009473781-pb-pbmydevsecops5555","parameter_group_name":"pg-068009473781-pb-pbmydevsecops5555","password":"Aa1234321Bb","performance_insights_enabled":false,"publicly_accessible":true,"replicate_source_db":null,"s3_import":[],"security_group_names":null,"skip_final_snapshot":true,"snapshot_identifier":null,"storage_encrypted":false,"tags":{"Environment":"068009473781-pb-pbmydevsecops5555","Name":"068009473781-pb-pbmydevsecops5555-rds"},"timeouts":null,"username":"admin"},"after_unknown":{"address":true,"arn":true,"availability_zone":true,"backup_window":true,"ca_cert_identifier":true,"character_set_name":true,"endpoint":true,"hosted_zone_id":true,"id":true,"identifier_prefix":true,"kms_key_id":true,"license_model":true,"maintenance_window":true,"monitoring_role_arn":true,"performance_insights_kms_key_id":true,"performance_insights_retention_period":true,"port":true,"replicas":true,"resource_id":true,"s3_import":[],"status":true,"storage_type":true,"tags":{},"timezone":true,"vpc_security_group_ids":true}}},{"address":"aws_db_option_group.default","mode":"managed","type":"aws_db_option_group","name":"default","provider_name":"aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:rds:us-west-2:068009473781:og:og-068009473781-pb-pbmydevsecops5555","engine_name":"mysql","id":"og-068009473781-pb-pbmydevsecops5555","major_engine_version":"8.0","name":"og-068009473781-pb-pbmydevsecops5555","name_prefix":null,"option":[],"option_group_description":"Terraform OG","tags":{"Environment":"068009473781-pb-pbmydevsecops5555","Name":"068009473781-pb-pbmydevsecops5555-og"},"timeouts":null},"after":{"arn":"arn:aws:rds:us-west-2:068009473781:og:og-068009473781-pb-pbmydevsecops5555","engine_name":"mysql","id":"og-068009473781-pb-pbmydevsecops5555","major_engine_version":"8.0","name":"og-068009473781-pb-pbmydevsecops5555","name_prefix":null,"option":[],"option_group_description":"Terraform OG","tags":{"Environment":"068009473781-pb-pbmydevsecops5555","Name":"068009473781-pb-pbmydevsecops5555-og"},"timeouts":null},"after_unknown":{}}},{"address":"aws_db_parameter_group.default","mode":"managed","type":"aws_db_parameter_group","name":"default","provider_name":"aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:rds:us-west-2:068009473781:pg:pg-068009473781-pb-pbmydevsecops5555","description":"Terraform PG","family":"mysql8.0","id":"pg-068009473781-pb-pbmydevsecops5555","name":"pg-068009473781-pb-pbmydevsecops5555","name_prefix":null,"parameter":[{"apply_method":"immediate","name":"character_set_client","value":"utf8"},{"apply_method":"immediate","name":"character_set_server","value":"utf8"}],"tags":{"Environment":"068009473781-pb-pbmydevsecops5555","Name":"068009473781-pb-pbmydevsecops5555-pg"}},"after":{"arn":"arn:aws:rds:us-west-2:068009473781:pg:pg-068009473781-pb-pbmydevsecops5555","description":"Terraform PG","family":"mysql8.0","id":"pg-068009473781-pb-pbmydevsecops5555","name":"pg-068009473781-pb-pbmydevsecops5555","name_prefix":null,"parameter":[{"apply_method":"immediate","name":"character_set_client","value":"utf8"},{"apply_method":"immediate","name":"character_set_server","value":"utf8"}],"tags":{"Environment":"068009473781-pb-pbmydevsecops5555","Name":"068009473781-pb-pbmydevsecops5555-pg"}},"after_unknown":{}}},{"address":"aws_db_subnet_group.default","mode":"managed","type":"aws_db_subnet_group","name":"default","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"description":"Terraform DB Subnet Group","name":"sg-068009473781-pb-pbmydevsecops5555","tags":{"Environment":"068009473781-pb-pbmydevsecops5555","Name":"sg-068009473781-pb-pbmydevsecops5555"}},"after_unknown":{"arn":true,"id":true,"name_prefix":true,"subnet_ids":true,"tags":{}}}},{"address":"aws_ebs_snapshot.example_snapshot","mode":"managed","type":"aws_ebs_snapshot","name":"example_snapshot","provider_name":"aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:us-west-2::snapshot/snap-0475e105b5899aa65","data_encryption_key_id":"","description":"068009473781-pb-pbmydevsecops5555-ebs-snapshot","encrypted":false,"id":"snap-0475e105b5899aa65","kms_key_id":"","owner_alias":"","owner_id":"068009473781","tags":{"Name":"068009473781-pb-pbmydevsecops5555-ebs-snapshot"},"timeouts":null,"volume_id":"vol-01a64c37b5281b8da","volume_size":1},"after":{"arn":"arn:aws:ec2:us-west-2::snapshot/snap-0475e105b5899aa65","data_encryption_key_id":"","description":"068009473781-pb-pbmydevsecops5555-ebs-snapshot","encrypted":false,"id":"snap-0475e105b5899aa65","kms_key_id":"","owner_alias":"","owner_id":"068009473781","tags":{"Name":"068009473781-pb-pbmydevsecops5555-ebs-snapshot"},"timeouts":null,"volume_id":"vol-01a64c37b5281b8da","volume_size":1},"after_unknown":{}}},{"address":"aws_ebs_volume.web_host_storage","mode":"managed","type":"aws_ebs_volume","name":"web_host_storage","provider_name":"aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:us-west-2:068009473781:volume/vol-01a64c37b5281b8da","availability_zone":"us-west-2a","encrypted":false,"id":"vol-01a64c37b5281b8da","iops":100,"kms_key_id":"","multi_attach_enabled":false,"outpost_arn":"","size":1,"snapshot_id":"","tags":{"Name":"068009473781-pb-pbmydevsecops5555-ebs"},"type":"gp2"},"after":{"arn":"arn:aws:ec2:us-west-2:068009473781:volume/vol-01a64c37b5281b8da","availability_zone":"us-west-2a","encrypted":false,"id":"vol-01a64c37b5281b8da","iops":100,"kms_key_id":"","multi_attach_enabled":false,"outpost_arn":"","size":1,"snapshot_id":"","tags":{"Name":"068009473781-pb-pbmydevsecops5555-ebs"},"type":"gp2"},"after_unknown":{}}},{"address":"aws_ecr_repository.repository","mode":"managed","type":"aws_ecr_repository","name":"repository","provider_name":"aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ecr:us-west-2:068009473781:repository/068009473781-pb-pbmydevsecops5555-repository","id":"068009473781-pb-pbmydevsecops5555-repository","image_scanning_configuration":[{"scan_on_push":false}],"image_tag_mutability":"MUTABLE","name":"068009473781-pb-pbmydevsecops5555-repository","registry_id":"068009473781","repository_url":"068009473781.dkr.ecr.us-west-2.amazonaws.com/068009473781-pb-pbmydevsecops5555-repository","tags":{"Name":"068009473781-pb-pbmydevsecops5555-repository"},"timeouts":null},"after":{"arn":"arn:aws:ecr:us-west-2:068009473781:repository/068009473781-pb-pbmydevsecops5555-repository","id":"068009473781-pb-pbmydevsecops5555-repository","image_scanning_configuration":[{"scan_on_push":false}],"image_tag_mutability":"MUTABLE","name":"068009473781-pb-pbmydevsecops5555-repository","registry_id":"068009473781","repository_url":"068009473781.dkr.ecr.us-west-2.amazonaws.com/068009473781-pb-pbmydevsecops5555-repository","tags":{"Name":"068009473781-pb-pbmydevsecops5555-repository"},"timeouts":null},"after_unknown":{}}},{"address":"aws_eks_cluster.eks_cluster","mode":"managed","type":"aws_eks_cluster","name":"eks_cluster","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"enabled_cluster_log_types":null,"encryption_config":[],"name":"068009473781-pb-pbmydevsecops5555-eks","role_arn":"arn:aws:iam::068009473781:role/068009473781-pb-pbmydevsecops5555-iam-for-eks","tags":null,"timeouts":null,"vpc_config":[{"endpoint_private_access":true,"endpoint_public_access":true,"security_group_ids":null}]},"after_unknown":{"arn":true,"certificate_authority":true,"created_at":true,"encryption_config":[],"endpoint":true,"id":true,"identity":true,"platform_version":true,"status":true,"version":true,"vpc_config":[{"cluster_security_group_id":true,"public_access_cidrs":true,"subnet_ids":true,"vpc_id":true}]}}},{"address":"aws_elasticsearch_domain.monitoring-framework","mode":"managed","type":"aws_elasticsearch_domain","name":"monitoring-framework","provider_name":"aws","change":{"actions":["no-op"],"before":{"access_policies":"{\"Statement\":[{\"Action\":\"es:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Resource\":\"*\",\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}","advanced_options":{"rest.action.multi.allow_explicit_index":"true"},"advanced_security_options":[{"enabled":false,"internal_user_database_enabled":false,"master_user_options":[]}],"arn":"arn:aws:es:us-west-2:068009473781:domain/tg-pbmydevsecops5555-es","cluster_config":[{"dedicated_master_count":0,"dedicated_master_enabled":false,"dedicated_master_type":"","instance_count":1,"instance_type":"t2.small.elasticsearch","warm_count":0,"warm_enabled":false,"warm_type":"","zone_awareness_config":[],"zone_awareness_enabled":false}],"cognito_options":[{"enabled":false,"identity_pool_id":"","role_arn":"","user_pool_id":""}],"domain_endpoint_options":[{"enforce_https":false,"tls_security_policy":"Policy-Min-TLS-1-0-2019-07"}],"domain_id":"068009473781/tg-pbmydevsecops5555-es","domain_name":"tg-pbmydevsecops5555-es","ebs_options":[{"ebs_enabled":true,"iops":0,"volume_size":30,"volume_type":"gp2"}],"elasticsearch_version":"2.3","encrypt_at_rest":[{"enabled":false,"kms_key_id":""}],"endpoint":"search-tg-pbmydevsecops5555-es-xa7tn2nw6mx7aoxovo522pazvm.us-west-2.es.amazonaws.com","id":"arn:aws:es:us-west-2:068009473781:domain/tg-pbmydevsecops5555-es","kibana_endpoint":"search-tg-pbmydevsecops5555-es-xa7tn2nw6mx7aoxovo522pazvm.us-west-2.es.amazonaws.com/_plugin/kibana/","log_publishing_options":[],"node_to_node_encryption":[{"enabled":false}],"snapshot_options":[{"automated_snapshot_start_hour":0}],"tags":{},"timeouts":null,"vpc_options":[]},"after":{"access_policies":"{\"Statement\":[{\"Action\":\"es:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Resource\":\"*\",\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}","advanced_options":{"rest.action.multi.allow_explicit_index":"true"},"advanced_security_options":[{"enabled":false,"internal_user_database_enabled":false,"master_user_options":[]}],"arn":"arn:aws:es:us-west-2:068009473781:domain/tg-pbmydevsecops5555-es","cluster_config":[{"dedicated_master_count":0,"dedicated_master_enabled":false,"dedicated_master_type":"","instance_count":1,"instance_type":"t2.small.elasticsearch","warm_count":0,"warm_enabled":false,"warm_type":"","zone_awareness_config":[],"zone_awareness_enabled":false}],"cognito_options":[{"enabled":false,"identity_pool_id":"","role_arn":"","user_pool_id":""}],"domain_endpoint_options":[{"enforce_https":false,"tls_security_policy":"Policy-Min-TLS-1-0-2019-07"}],"domain_id":"068009473781/tg-pbmydevsecops5555-es","domain_name":"tg-pbmydevsecops5555-es","ebs_options":[{"ebs_enabled":true,"iops":0,"volume_size":30,"volume_type":"gp2"}],"elasticsearch_version":"2.3","encrypt_at_rest":[{"enabled":false,"kms_key_id":""}],"endpoint":"search-tg-pbmydevsecops5555-es-xa7tn2nw6mx7aoxovo522pazvm.us-west-2.es.amazonaws.com","id":"arn:aws:es:us-west-2:068009473781:domain/tg-pbmydevsecops5555-es","kibana_endpoint":"search-tg-pbmydevsecops5555-es-xa7tn2nw6mx7aoxovo522pazvm.us-west-2.es.amazonaws.com/_plugin/kibana/","log_publishing_options":[],"node_to_node_encryption":[{"enabled":false}],"snapshot_options":[{"automated_snapshot_start_hour":0}],"tags":{},"timeouts":null,"vpc_options":[]},"after_unknown":{}}},{"address":"aws_elasticsearch_domain_policy.monitoring-framework-policy","mode":"managed","type":"aws_elasticsearch_domain_policy","name":"monitoring-framework-policy","provider_name":"aws","change":{"actions":["no-op"],"before":{"access_policies":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Action\":\"es:*\",\"Resource\":\"*\"}]}","domain_name":"tg-pbmydevsecops5555-es","id":"esd-policy-tg-pbmydevsecops5555-es"},"after":{"access_policies":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Action\":\"es:*\",\"Resource\":\"*\"}]}","domain_name":"tg-pbmydevsecops5555-es","id":"esd-policy-tg-pbmydevsecops5555-es"},"after_unknown":{}}},{"address":"aws_elb.weblb","mode":"managed","type":"aws_elb","name":"weblb","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"access_logs":[],"connection_draining":true,"connection_draining_timeout":400,"cross_zone_load_balancing":true,"health_check":[{"healthy_threshold":2,"interval":30,"target":"HTTP:8000/","timeout":3,"unhealthy_threshold":2}],"idle_timeout":400,"listener":[{"instance_port":8000,"instance_protocol":"http","lb_port":80,"lb_protocol":"http","ssl_certificate_id":""}],"name":"weblb-terraform-elb","name_prefix":null,"tags":{"Name":"foobar-terraform-elb"}},"after_unknown":{"access_logs":[],"arn":true,"availability_zones":true,"dns_name":true,"health_check":[{}],"id":true,"instances":true,"internal":true,"listener":[{}],"security_groups":true,"source_security_group":true,"source_security_group_id":true,"subnets":true,"tags":{},"zone_id":true}}},{"address":"aws_flow_log.vpcflowlogs","mode":"managed","type":"aws_flow_log","name":"vpcflowlogs","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"eni_id":null,"iam_role_arn":null,"log_destination":"arn:aws:s3:::068009473781-pb-pbmydevsecops5555-flowlogs","log_destination_type":"s3","max_aggregation_interval":600,"subnet_id":null,"tags":{"Environment":"068009473781-pb-pbmydevsecops5555","Name":"068009473781-pb-pbmydevsecops5555-flowlogs"},"traffic_type":"ALL"},"after_unknown":{"arn":true,"id":true,"log_format":true,"log_group_name":true,"tags":{},"vpc_id":true}}},{"address":"aws_iam_access_key.user","mode":"managed","type":"aws_iam_access_key","name":"user","provider_name":"aws","change":{"actions":["no-op"],"before":{"encrypted_secret":null,"id":"AKIAQ7VNOG325Y7WF5XN","key_fingerprint":null,"pgp_key":null,"secret":"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","ses_smtp_password":"AiVox4900VikMVa2C4VD5+xBF8BIV8axtDm0y1XkxEdU","ses_smtp_password_v4":"BCmpJZlEDuul7E/tAQYhfmejyptzppGkDE1ZyOJAjHpu","status":"Active","user":"068009473781-pb-pbmydevsecops5555-user"},"after":{"encrypted_secret":null,"id":"AKIAQ7VNOG325Y7WF5XN","key_fingerprint":null,"pgp_key":null,"secret":"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","ses_smtp_password":"AiVox4900VikMVa2C4VD5+xBF8BIV8axtDm0y1XkxEdU","ses_smtp_password_v4":"BCmpJZlEDuul7E/tAQYhfmejyptzppGkDE1ZyOJAjHpu","status":"Active","user":"068009473781-pb-pbmydevsecops5555-user"},"after_unknown":{}}},{"address":"aws_iam_instance_profile.ec2profile","mode":"managed","type":"aws_iam_instance_profile","name":"ec2profile","provider_name":"aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:iam::068009473781:instance-profile/068009473781-pb-pbmydevsecops5555-profile","create_date":"2020-07-27T23:48:36Z","id":"068009473781-pb-pbmydevsecops5555-profile","name":"068009473781-pb-pbmydevsecops5555-profile","name_prefix":null,"path":"/","role":"068009473781-pb-pbmydevsecops5555-role","roles":["068009473781-pb-pbmydevsecops5555-role"],"unique_id":"AIPAQ7VNOG32SCJF57Y6O"},"after":{"arn":"arn:aws:iam::068009473781:instance-profile/068009473781-pb-pbmydevsecops5555-profile","create_date":"2020-07-27T23:48:36Z","id":"068009473781-pb-pbmydevsecops5555-profile","name":"068009473781-pb-pbmydevsecops5555-profile","name_prefix":null,"path":"/","role":"068009473781-pb-pbmydevsecops5555-role","roles":["068009473781-pb-pbmydevsecops5555-role"],"unique_id":"AIPAQ7VNOG32SCJF57Y6O"},"after_unknown":{}}},{"address":"aws_iam_role.ec2role","mode":"managed","type":"aws_iam_role","name":"ec2role","provider_name":"aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:iam::068009473781:role/068009473781-pb-pbmydevsecops5555-role","assume_role_policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}","create_date":"2020-07-27T23:48:33Z","description":"","force_detach_policies":false,"id":"068009473781-pb-pbmydevsecops5555-role","max_session_duration":3600,"name":"068009473781-pb-pbmydevsecops5555-role","name_prefix":null,"path":"/","permissions_boundary":null,"tags":{"Environment":"068009473781-pb-pbmydevsecops5555","Name":"068009473781-pb-pbmydevsecops5555-role"},"unique_id":"AROAQ7VNOG32Q7UWHRLRR"},"after":{"arn":"arn:aws:iam::068009473781:role/068009473781-pb-pbmydevsecops5555-role","assume_role_policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}","create_date":"2020-07-27T23:48:33Z","description":"","force_detach_policies":false,"id":"068009473781-pb-pbmydevsecops5555-role","max_session_duration":3600,"name":"068009473781-pb-pbmydevsecops5555-role","name_prefix":null,"path":"/","permissions_boundary":null,"tags":{"Environment":"068009473781-pb-pbmydevsecops5555","Name":"068009473781-pb-pbmydevsecops5555-role"},"unique_id":"AROAQ7VNOG32Q7UWHRLRR"},"after_unknown":{}}},{"address":"aws_iam_role.iam_for_eks","mode":"managed","type":"aws_iam_role","name":"iam_for_eks","provider_name":"aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:iam::068009473781:role/068009473781-pb-pbmydevsecops5555-iam-for-eks","assume_role_policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"eks.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}","create_date":"2020-07-27T23:48:32Z","description":"","force_detach_policies":false,"id":"068009473781-pb-pbmydevsecops5555-iam-for-eks","max_session_duration":3600,"name":"068009473781-pb-pbmydevsecops5555-iam-for-eks","name_prefix":null,"path":"/","permissions_boundary":null,"tags":{},"unique_id":"AROAQ7VNOG32R5D5X7D5M"},"after":{"arn":"arn:aws:iam::068009473781:role/068009473781-pb-pbmydevsecops5555-iam-for-eks","assume_role_policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"eks.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}","create_date":"2020-07-27T23:48:32Z","description":"","force_detach_policies":false,"id":"068009473781-pb-pbmydevsecops5555-iam-for-eks","max_session_duration":3600,"name":"068009473781-pb-pbmydevsecops5555-iam-for-eks","name_prefix":null,"path":"/","permissions_boundary":null,"tags":{},"unique_id":"AROAQ7VNOG32R5D5X7D5M"},"after_unknown":{}}},{"address":"aws_iam_role.iam_for_lambda","mode":"managed","type":"aws_iam_role","name":"iam_for_lambda","provider_name":"aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:iam::068009473781:role/068009473781-pb-pbmydevsecops5555-analysis-lambda","assume_role_policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}","create_date":"2020-07-27T23:48:32Z","description":"","force_detach_policies":false,"id":"068009473781-pb-pbmydevsecops5555-analysis-lambda","max_session_duration":3600,"name":"068009473781-pb-pbmydevsecops5555-analysis-lambda","name_prefix":null,"path":"/","permissions_boundary":null,"tags":{},"unique_id":"AROAQ7VNOG322JLVBOET2"},"after":{"arn":"arn:aws:iam::068009473781:role/068009473781-pb-pbmydevsecops5555-analysis-lambda","assume_role_policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}","create_date":"2020-07-27T23:48:32Z","description":"","force_detach_policies":false,"id":"068009473781-pb-pbmydevsecops5555-analysis-lambda","max_session_duration":3600,"name":"068009473781-pb-pbmydevsecops5555-analysis-lambda","name_prefix":null,"path":"/","permissions_boundary":null,"tags":{},"unique_id":"AROAQ7VNOG322JLVBOET2"},"after_unknown":{}}},{"address":"aws_iam_role_policy.ec2policy","mode":"managed","type":"aws_iam_role_policy","name":"ec2policy","provider_name":"aws","change":{"actions":["no-op"],"before":{"id":"068009473781-pb-pbmydevsecops5555-role:068009473781-pb-pbmydevsecops5555-policy","name":"068009473781-pb-pbmydevsecops5555-policy","name_prefix":null,"policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"s3:*\",\n        \"ec2:*\",\n        \"rds:*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    }\n  ]\n}\n","role":"068009473781-pb-pbmydevsecops5555-role"},"after":{"id":"068009473781-pb-pbmydevsecops5555-role:068009473781-pb-pbmydevsecops5555-policy","name":"068009473781-pb-pbmydevsecops5555-policy","name_prefix":null,"policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"s3:*\",\n        \"ec2:*\",\n        \"rds:*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    }\n  ]\n}\n","role":"068009473781-pb-pbmydevsecops5555-role"},"after_unknown":{}}},{"address":"aws_iam_role_policy_attachment.policy_attachment-AmazonEKSClusterPolicy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"policy_attachment-AmazonEKSClusterPolicy","provider_name":"aws","change":{"actions":["no-op"],"before":{"id":"068009473781-pb-pbmydevsecops5555-iam-for-eks-20200727234836030000000002","policy_arn":"arn:aws:iam::aws:policy/AmazonEKSClusterPolicy","role":"068009473781-pb-pbmydevsecops5555-iam-for-eks"},"after":{"id":"068009473781-pb-pbmydevsecops5555-iam-for-eks-20200727234836030000000002","policy_arn":"arn:aws:iam::aws:policy/AmazonEKSClusterPolicy","role":"068009473781-pb-pbmydevsecops5555-iam-for-eks"},"after_unknown":{}}},{"address":"aws_iam_role_policy_attachment.policy_attachment-AmazonEKSServicePolicy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"policy_attachment-AmazonEKSServicePolicy","provider_name":"aws","change":{"actions":["no-op"],"before":{"id":"068009473781-pb-pbmydevsecops5555-iam-for-eks-20200727234836026300000001","policy_arn":"arn:aws:iam::aws:policy/AmazonEKSServicePolicy","role":"068009473781-pb-pbmydevsecops5555-iam-for-eks"},"after":{"id":"068009473781-pb-pbmydevsecops5555-iam-for-eks-20200727234836026300000001","policy_arn":"arn:aws:iam::aws:policy/AmazonEKSServicePolicy","role":"068009473781-pb-pbmydevsecops5555-iam-for-eks"},"after_unknown":{}}},{"address":"aws_iam_user.user","mode":"managed","type":"aws_iam_user","name":"user","provider_name":"aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:iam::068009473781:user/068009473781-pb-pbmydevsecops5555-user","force_destroy":true,"id":"068009473781-pb-pbmydevsecops5555-user","name":"068009473781-pb-pbmydevsecops5555-user","path":"/","permissions_boundary":null,"tags":{"Environment":"068009473781-pb-pbmydevsecops5555","Name":"068009473781-pb-pbmydevsecops5555-user"},"unique_id":"AIDAQ7VNOG32QMFWCIOYE"},"after":{"arn":"arn:aws:iam::068009473781:user/068009473781-pb-pbmydevsecops5555-user","force_destroy":true,"id":"068009473781-pb-pbmydevsecops5555-user","name":"068009473781-pb-pbmydevsecops5555-user","path":"/","permissions_boundary":null,"tags":{"Environment":"068009473781-pb-pbmydevsecops5555","Name":"068009473781-pb-pbmydevsecops5555-user"},"unique_id":"AIDAQ7VNOG32QMFWCIOYE"},"after_unknown":{}}},{"address":"aws_iam_user_policy.userpolicy","mode":"managed","type":"aws_iam_user_policy","name":"userpolicy","provider_name":"aws","change":{"actions":["no-op"],"before":{"id":"068009473781-pb-pbmydevsecops5555-user:excess_policy","name":"excess_policy","name_prefix":null,"policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:*\",\n        \"s3:*\",\n        \"lambda:*\",\n        \"cloudwatch:*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    }\n  ]\n}\n","user":"068009473781-pb-pbmydevsecops5555-user"},"after":{"id":"068009473781-pb-pbmydevsecops5555-user:excess_policy","name":"excess_policy","name_prefix":null,"policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:*\",\n        \"s3:*\",\n        \"lambda:*\",\n        \"cloudwatch:*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    }\n  ]\n}\n","user":"068009473781-pb-pbmydevsecops5555-user"},"after_unknown":{}}},{"address":"aws_instance.db_app","mode":"managed","type":"aws_instance","name":"db_app","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"ami":"ami-07e0762dd335c2557","credit_specification":[],"disable_api_termination":null,"ebs_optimized":null,"get_password_data":false,"hibernation":null,"iam_instance_profile":"068009473781-pb-pbmydevsecops5555-profile","instance_initiated_shutdown_behavior":null,"instance_type":"t2.nano","monitoring":null,"source_dest_check":true,"tags":{"Name":"068009473781-pb-pbmydevsecops5555-dbapp"},"timeouts":null,"user_data_base64":null},"after_unknown":{"arn":true,"associate_public_ip_address":true,"availability_zone":true,"cpu_core_count":true,"cpu_threads_per_core":true,"credit_specification":[],"ebs_block_device":true,"ephemeral_block_device":true,"host_id":true,"id":true,"instance_state":true,"ipv6_address_count":true,"ipv6_addresses":true,"key_name":true,"metadata_options":true,"network_interface":true,"network_interface_id":true,"outpost_arn":true,"password_data":true,"placement_group":true,"primary_network_interface_id":true,"private_dns":true,"private_ip":true,"public_dns":true,"public_ip":true,"root_block_device":true,"security_groups":true,"subnet_id":true,"tags":{},"tenancy":true,"user_data":true,"volume_tags":true,"vpc_security_group_ids":true}}},{"address":"aws_instance.web_host","mode":"managed","type":"aws_instance","name":"web_host","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"ami":"ami-09a5b0b7edf08843d","credit_specification":[],"disable_api_termination":null,"ebs_optimized":null,"get_password_data":false,"hibernation":null,"iam_instance_profile":null,"instance_initiated_shutdown_behavior":null,"instance_type":"t2.nano","monitoring":null,"source_dest_check":true,"tags":{"Name":"068009473781-pb-pbmydevsecops5555-ec2"},"timeouts":null,"user_data":"44c6c808e6449ee36dfcfc4ebd66c1b9634b40f2","user_data_base64":null},"after_unknown":{"arn":true,"associate_public_ip_address":true,"availability_zone":true,"cpu_core_count":true,"cpu_threads_per_core":true,"credit_specification":[],"ebs_block_device":true,"ephemeral_block_device":true,"host_id":true,"id":true,"instance_state":true,"ipv6_address_count":true,"ipv6_addresses":true,"key_name":true,"metadata_options":true,"network_interface":true,"network_interface_id":true,"outpost_arn":true,"password_data":true,"placement_group":true,"primary_network_interface_id":true,"private_dns":true,"private_ip":true,"public_dns":true,"public_ip":true,"root_block_device":true,"security_groups":true,"subnet_id":true,"tags":{},"tenancy":true,"volume_tags":true,"vpc_security_group_ids":true}}},{"address":"aws_internet_gateway.web_igw","mode":"managed","type":"aws_internet_gateway","name":"web_igw","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"tags":{"Name":"068009473781-pb-pbmydevsecops5555-igw"}},"after_unknown":{"arn":true,"id":true,"owner_id":true,"tags":{},"vpc_id":true}}},{"address":"aws_kms_alias.logs_key_alias","mode":"managed","type":"aws_kms_alias","name":"logs_key_alias","provider_name":"aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:kms:us-west-2:068009473781:alias/068009473781-pb-pbmydevsecops5555-logs-bucket-key","id":"alias/068009473781-pb-pbmydevsecops5555-logs-bucket-key","name":"alias/068009473781-pb-pbmydevsecops5555-logs-bucket-key","name_prefix":null,"target_key_arn":"arn:aws:kms:us-west-2:068009473781:key/f381cd7e-b78a-4bcc-a45f-7aac32b01d02","target_key_id":"f381cd7e-b78a-4bcc-a45f-7aac32b01d02"},"after":{"arn":"arn:aws:kms:us-west-2:068009473781:alias/068009473781-pb-pbmydevsecops5555-logs-bucket-key","id":"alias/068009473781-pb-pbmydevsecops5555-logs-bucket-key","name":"alias/068009473781-pb-pbmydevsecops5555-logs-bucket-key","name_prefix":null,"target_key_arn":"arn:aws:kms:us-west-2:068009473781:key/f381cd7e-b78a-4bcc-a45f-7aac32b01d02","target_key_id":"f381cd7e-b78a-4bcc-a45f-7aac32b01d02"},"after_unknown":{}}},{"address":"aws_kms_key.logs_key","mode":"managed","type":"aws_kms_key","name":"logs_key","provider_name":"aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:kms:us-west-2:068009473781:key/f381cd7e-b78a-4bcc-a45f-7aac32b01d02","customer_master_key_spec":"SYMMETRIC_DEFAULT","deletion_window_in_days":7,"description":"068009473781-pb-pbmydevsecops5555-logs bucket key","enable_key_rotation":false,"id":"f381cd7e-b78a-4bcc-a45f-7aac32b01d02","is_enabled":true,"key_id":"f381cd7e-b78a-4bcc-a45f-7aac32b01d02","key_usage":"ENCRYPT_DECRYPT","policy":"{\"Id\":\"key-default-1\",\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::068009473781:root\"},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"}],\"Version\":\"2012-10-17\"}","tags":{}},"after":{"arn":"arn:aws:kms:us-west-2:068009473781:key/f381cd7e-b78a-4bcc-a45f-7aac32b01d02","customer_master_key_spec":"SYMMETRIC_DEFAULT","deletion_window_in_days":7,"description":"068009473781-pb-pbmydevsecops5555-logs bucket key","enable_key_rotation":false,"id":"f381cd7e-b78a-4bcc-a45f-7aac32b01d02","is_enabled":true,"key_id":"f381cd7e-b78a-4bcc-a45f-7aac32b01d02","key_usage":"ENCRYPT_DECRYPT","policy":"{\"Id\":\"key-default-1\",\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::068009473781:root\"},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"}],\"Version\":\"2012-10-17\"}","tags":{}},"after_unknown":{}}},{"address":"aws_lambda_function.analysis_lambda","mode":"managed","type":"aws_lambda_function","name":"analysis_lambda","provider_name":"aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:lambda:us-west-2:068009473781:function:068009473781-pb-pbmydevsecops5555-analysis","dead_letter_config":[],"description":"","environment":[{"variables":{"access_key":"AKIAIOSFODNN7EXAMPLE","secret_key":"wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY"}}],"file_system_config":[],"filename":"resources/lambda_function_payload.zip","function_name":"068009473781-pb-pbmydevsecops5555-analysis","handler":"exports.test","id":"068009473781-pb-pbmydevsecops5555-analysis","invoke_arn":"arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:068009473781:function:068009473781-pb-pbmydevsecops5555-analysis/invocations","kms_key_arn":"","last_modified":"2020-07-27T23:48:43.133+0000","layers":[],"memory_size":128,"publish":false,"qualified_arn":"arn:aws:lambda:us-west-2:068009473781:function:068009473781-pb-pbmydevsecops5555-analysis:$LATEST","reserved_concurrent_executions":-1,"role":"arn:aws:iam::068009473781:role/068009473781-pb-pbmydevsecops5555-analysis-lambda","runtime":"nodejs12.x","s3_bucket":null,"s3_key":null,"s3_object_version":null,"source_code_hash":"Fne61Y/F2pmVywaVqIYcztFMK3LNeMJKpWFNnxDdGTw=","source_code_size":195,"tags":{},"timeout":3,"timeouts":null,"tracing_config":[{"mode":"PassThrough"}],"version":"$LATEST","vpc_config":[]},"after":{"arn":"arn:aws:lambda:us-west-2:068009473781:function:068009473781-pb-pbmydevsecops5555-analysis","dead_letter_config":[],"description":"","environment":[{"variables":{"access_key":"AKIAIOSFODNN7EXAMPLE","secret_key":"wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY"}}],"file_system_config":[],"filename":"resources/lambda_function_payload.zip","function_name":"068009473781-pb-pbmydevsecops5555-analysis","handler":"exports.test","id":"068009473781-pb-pbmydevsecops5555-analysis","invoke_arn":"arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:068009473781:function:068009473781-pb-pbmydevsecops5555-analysis/invocations","kms_key_arn":"","last_modified":"2020-07-27T23:48:43.133+0000","layers":[],"memory_size":128,"publish":false,"qualified_arn":"arn:aws:lambda:us-west-2:068009473781:function:068009473781-pb-pbmydevsecops5555-analysis:$LATEST","reserved_concurrent_executions":-1,"role":"arn:aws:iam::068009473781:role/068009473781-pb-pbmydevsecops5555-analysis-lambda","runtime":"nodejs12.x","s3_bucket":null,"s3_key":null,"s3_object_version":null,"source_code_hash":"Fne61Y/F2pmVywaVqIYcztFMK3LNeMJKpWFNnxDdGTw=","source_code_size":195,"tags":{},"timeout":3,"timeouts":null,"tracing_config":[{"mode":"PassThrough"}],"version":"$LATEST","vpc_config":[]},"after_unknown":{}}},{"address":"aws_network_interface.web-eni","mode":"managed","type":"aws_network_interface","name":"web-eni","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"description":null,"private_ips":["172.16.10.100"],"source_dest_check":true,"tags":{"Name":"068009473781-pb-pbmydevsecops5555-primary_network_interface"}},"after_unknown":{"attachment":true,"id":true,"mac_address":true,"outpost_arn":true,"private_dns_name":true,"private_ip":true,"private_ips":[false],"private_ips_count":true,"security_groups":true,"subnet_id":true,"tags":{}}}},{"address":"aws_route.public_internet_gateway","mode":"managed","type":"aws_route","name":"public_internet_gateway","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":null,"timeouts":{"create":"5m","delete":null},"transit_gateway_id":null,"vpc_peering_connection_id":null},"after_unknown":{"destination_prefix_list_id":true,"egress_only_gateway_id":true,"gateway_id":true,"id":true,"instance_id":true,"instance_owner_id":true,"nat_gateway_id":true,"network_interface_id":true,"origin":true,"route_table_id":true,"state":true,"timeouts":{}}}},{"address":"aws_route_table.web_rtb","mode":"managed","type":"aws_route_table","name":"web_rtb","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"tags":{"Name":"068009473781-pb-pbmydevsecops5555-rtb"}},"after_unknown":{"id":true,"owner_id":true,"propagating_vgws":true,"route":true,"tags":{},"vpc_id":true}}},{"address":"aws_route_table_association.rtbassoc","mode":"managed","type":"aws_route_table_association","name":"rtbassoc","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true}}},{"address":"aws_route_table_association.rtbassoc2","mode":"managed","type":"aws_route_table_association","name":"rtbassoc2","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true}}},{"address":"aws_s3_bucket.data","mode":"managed","type":"aws_s3_bucket","name":"data","provider_name":"aws","change":{"actions":["no-op"],"before":{"acceleration_status":"","acl":"public-read","arn":"arn:aws:s3:::068009473781-pb-pbmydevsecops5555-data","bucket":"068009473781-pb-pbmydevsecops5555-data","bucket_domain_name":"068009473781-pb-pbmydevsecops5555-data.s3.amazonaws.com","bucket_prefix":null,"bucket_regional_domain_name":"068009473781-pb-pbmydevsecops5555-data.s3.us-west-2.amazonaws.com","cors_rule":[],"force_destroy":true,"grant":[],"hosted_zone_id":"Z3BJ6K6RIION7M","id":"068009473781-pb-pbmydevsecops5555-data","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":null,"region":"us-west-2","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[],"tags":{"Environment":"068009473781-pb-pbmydevsecops5555","Name":"068009473781-pb-pbmydevsecops5555-data"},"versioning":[{"enabled":false,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"after":{"acceleration_status":"","acl":"public-read","arn":"arn:aws:s3:::068009473781-pb-pbmydevsecops5555-data","bucket":"068009473781-pb-pbmydevsecops5555-data","bucket_domain_name":"068009473781-pb-pbmydevsecops5555-data.s3.amazonaws.com","bucket_prefix":null,"bucket_regional_domain_name":"068009473781-pb-pbmydevsecops5555-data.s3.us-west-2.amazonaws.com","cors_rule":[],"force_destroy":true,"grant":[],"hosted_zone_id":"Z3BJ6K6RIION7M","id":"068009473781-pb-pbmydevsecops5555-data","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":null,"region":"us-west-2","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[],"tags":{"Environment":"068009473781-pb-pbmydevsecops5555","Name":"068009473781-pb-pbmydevsecops5555-data"},"versioning":[{"enabled":false,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"after_unknown":{}}},{"address":"aws_s3_bucket.data_science","mode":"managed","type":"aws_s3_bucket","name":"data_science","provider_name":"aws","change":{"actions":["no-op"],"before":{"acceleration_status":"","acl":"private","arn":"arn:aws:s3:::068009473781-pb-pbmydevsecops5555-data-science","bucket":"068009473781-pb-pbmydevsecops5555-data-science","bucket_domain_name":"068009473781-pb-pbmydevsecops5555-data-science.s3.amazonaws.com","bucket_prefix":null,"bucket_regional_domain_name":"068009473781-pb-pbmydevsecops5555-data-science.s3.us-west-2.amazonaws.com","cors_rule":[],"force_destroy":true,"grant":[],"hosted_zone_id":"Z3BJ6K6RIION7M","id":"068009473781-pb-pbmydevsecops5555-data-science","lifecycle_rule":[],"logging":[{"target_bucket":"068009473781-pb-pbmydevsecops5555-logs","target_prefix":"log/"}],"object_lock_configuration":[],"policy":null,"region":"us-west-2","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[],"tags":{},"versioning":[{"enabled":true,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"after":{"acceleration_status":"","acl":"private","arn":"arn:aws:s3:::068009473781-pb-pbmydevsecops5555-data-science","bucket":"068009473781-pb-pbmydevsecops5555-data-science","bucket_domain_name":"068009473781-pb-pbmydevsecops5555-data-science.s3.amazonaws.com","bucket_prefix":null,"bucket_regional_domain_name":"068009473781-pb-pbmydevsecops5555-data-science.s3.us-west-2.amazonaws.com","cors_rule":[],"force_destroy":true,"grant":[],"hosted_zone_id":"Z3BJ6K6RIION7M","id":"068009473781-pb-pbmydevsecops5555-data-science","lifecycle_rule":[],"logging":[{"target_bucket":"068009473781-pb-pbmydevsecops5555-logs","target_prefix":"log/"}],"object_lock_configuration":[],"policy":null,"region":"us-west-2","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[],"tags":{},"versioning":[{"enabled":true,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"after_unknown":{}}},{"address":"aws_s3_bucket.financials","mode":"managed","type":"aws_s3_bucket","name":"financials","provider_name":"aws","change":{"actions":["no-op"],"before":{"acceleration_status":"","acl":"private","arn":"arn:aws:s3:::068009473781-pb-pbmydevsecops5555-financials","bucket":"068009473781-pb-pbmydevsecops5555-financials","bucket_domain_name":"068009473781-pb-pbmydevsecops5555-financials.s3.amazonaws.com","bucket_prefix":null,"bucket_regional_domain_name":"068009473781-pb-pbmydevsecops5555-financials.s3.us-west-2.amazonaws.com","cors_rule":[],"force_destroy":true,"grant":[],"hosted_zone_id":"Z3BJ6K6RIION7M","id":"068009473781-pb-pbmydevsecops5555-financials","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":null,"region":"us-west-2","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[],"tags":{"Environment":"068009473781-pb-pbmydevsecops5555","Name":"068009473781-pb-pbmydevsecops5555-financials"},"versioning":[{"enabled":false,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"after":{"acceleration_status":"","acl":"private","arn":"arn:aws:s3:::068009473781-pb-pbmydevsecops5555-financials","bucket":"068009473781-pb-pbmydevsecops5555-financials","bucket_domain_name":"068009473781-pb-pbmydevsecops5555-financials.s3.amazonaws.com","bucket_prefix":null,"bucket_regional_domain_name":"068009473781-pb-pbmydevsecops5555-financials.s3.us-west-2.amazonaws.com","cors_rule":[],"force_destroy":true,"grant":[],"hosted_zone_id":"Z3BJ6K6RIION7M","id":"068009473781-pb-pbmydevsecops5555-financials","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":null,"region":"us-west-2","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[],"tags":{"Environment":"068009473781-pb-pbmydevsecops5555","Name":"068009473781-pb-pbmydevsecops5555-financials"},"versioning":[{"enabled":false,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"after_unknown":{}}},{"address":"aws_s3_bucket.flowbucket","mode":"managed","type":"aws_s3_bucket","name":"flowbucket","provider_name":"aws","change":{"actions":["no-op"],"before":{"acceleration_status":"","acl":"private","arn":"arn:aws:s3:::068009473781-pb-pbmydevsecops5555-flowlogs","bucket":"068009473781-pb-pbmydevsecops5555-flowlogs","bucket_domain_name":"068009473781-pb-pbmydevsecops5555-flowlogs.s3.amazonaws.com","bucket_prefix":null,"bucket_regional_domain_name":"068009473781-pb-pbmydevsecops5555-flowlogs.s3.us-west-2.amazonaws.com","cors_rule":[],"force_destroy":true,"grant":[],"hosted_zone_id":"Z3BJ6K6RIION7M","id":"068009473781-pb-pbmydevsecops5555-flowlogs","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":null,"region":"us-west-2","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[],"tags":{"Environment":"068009473781-pb-pbmydevsecops5555","Name":"068009473781-pb-pbmydevsecops5555-flowlogs"},"versioning":[{"enabled":false,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"after":{"acceleration_status":"","acl":"private","arn":"arn:aws:s3:::068009473781-pb-pbmydevsecops5555-flowlogs","bucket":"068009473781-pb-pbmydevsecops5555-flowlogs","bucket_domain_name":"068009473781-pb-pbmydevsecops5555-flowlogs.s3.amazonaws.com","bucket_prefix":null,"bucket_regional_domain_name":"068009473781-pb-pbmydevsecops5555-flowlogs.s3.us-west-2.amazonaws.com","cors_rule":[],"force_destroy":true,"grant":[],"hosted_zone_id":"Z3BJ6K6RIION7M","id":"068009473781-pb-pbmydevsecops5555-flowlogs","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":null,"region":"us-west-2","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[],"tags":{"Environment":"068009473781-pb-pbmydevsecops5555","Name":"068009473781-pb-pbmydevsecops5555-flowlogs"},"versioning":[{"enabled":false,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"after_unknown":{}}},{"address":"aws_s3_bucket.logs","mode":"managed","type":"aws_s3_bucket","name":"logs","provider_name":"aws","change":{"actions":["no-op"],"before":{"acceleration_status":"","acl":"log-delivery-write","arn":"arn:aws:s3:::068009473781-pb-pbmydevsecops5555-logs","bucket":"068009473781-pb-pbmydevsecops5555-logs","bucket_domain_name":"068009473781-pb-pbmydevsecops5555-logs.s3.amazonaws.com","bucket_prefix":null,"bucket_regional_domain_name":"068009473781-pb-pbmydevsecops5555-logs.s3.us-west-2.amazonaws.com","cors_rule":[],"force_destroy":true,"grant":[],"hosted_zone_id":"Z3BJ6K6RIION7M","id":"068009473781-pb-pbmydevsecops5555-logs","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":null,"region":"us-west-2","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"arn:aws:kms:us-west-2:068009473781:key/f381cd7e-b78a-4bcc-a45f-7aac32b01d02","sse_algorithm":"aws:kms"}]}]}],"tags":{"Environment":"068009473781-pb-pbmydevsecops5555","Name":"068009473781-pb-pbmydevsecops5555-logs"},"versioning":[{"enabled":true,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"after":{"acceleration_status":"","acl":"log-delivery-write","arn":"arn:aws:s3:::068009473781-pb-pbmydevsecops5555-logs","bucket":"068009473781-pb-pbmydevsecops5555-logs","bucket_domain_name":"068009473781-pb-pbmydevsecops5555-logs.s3.amazonaws.com","bucket_prefix":null,"bucket_regional_domain_name":"068009473781-pb-pbmydevsecops5555-logs.s3.us-west-2.amazonaws.com","cors_rule":[],"force_destroy":true,"grant":[],"hosted_zone_id":"Z3BJ6K6RIION7M","id":"068009473781-pb-pbmydevsecops5555-logs","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":null,"region":"us-west-2","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"arn:aws:kms:us-west-2:068009473781:key/f381cd7e-b78a-4bcc-a45f-7aac32b01d02","sse_algorithm":"aws:kms"}]}]}],"tags":{"Environment":"068009473781-pb-pbmydevsecops5555","Name":"068009473781-pb-pbmydevsecops5555-logs"},"versioning":[{"enabled":true,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"after_unknown":{}}},{"address":"aws_s3_bucket.operations","mode":"managed","type":"aws_s3_bucket","name":"operations","provider_name":"aws","change":{"actions":["no-op"],"before":{"acceleration_status":"","acl":"private","arn":"arn:aws:s3:::068009473781-pb-pbmydevsecops5555-operations","bucket":"068009473781-pb-pbmydevsecops5555-operations","bucket_domain_name":"068009473781-pb-pbmydevsecops5555-operations.s3.amazonaws.com","bucket_prefix":null,"bucket_regional_domain_name":"068009473781-pb-pbmydevsecops5555-operations.s3.us-west-2.amazonaws.com","cors_rule":[],"force_destroy":true,"grant":[],"hosted_zone_id":"Z3BJ6K6RIION7M","id":"068009473781-pb-pbmydevsecops5555-operations","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":null,"region":"us-west-2","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[],"tags":{"Environment":"068009473781-pb-pbmydevsecops5555","Name":"068009473781-pb-pbmydevsecops5555-operations"},"versioning":[{"enabled":true,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"after":{"acceleration_status":"","acl":"private","arn":"arn:aws:s3:::068009473781-pb-pbmydevsecops5555-operations","bucket":"068009473781-pb-pbmydevsecops5555-operations","bucket_domain_name":"068009473781-pb-pbmydevsecops5555-operations.s3.amazonaws.com","bucket_prefix":null,"bucket_regional_domain_name":"068009473781-pb-pbmydevsecops5555-operations.s3.us-west-2.amazonaws.com","cors_rule":[],"force_destroy":true,"grant":[],"hosted_zone_id":"Z3BJ6K6RIION7M","id":"068009473781-pb-pbmydevsecops5555-operations","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":null,"region":"us-west-2","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[],"tags":{"Environment":"068009473781-pb-pbmydevsecops5555","Name":"068009473781-pb-pbmydevsecops5555-operations"},"versioning":[{"enabled":true,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"after_unknown":{}}},{"address":"aws_s3_bucket_object.data_object","mode":"managed","type":"aws_s3_bucket_object","name":"data_object","provider_name":"aws","change":{"actions":["no-op"],"before":{"acl":"private","bucket":"068009473781-pb-pbmydevsecops5555-data","cache_control":"","content":null,"content_base64":null,"content_disposition":"","content_encoding":"","content_language":"","content_type":"binary/octet-stream","etag":"e0503b22cec66928e560c4351a091dc3","force_destroy":false,"id":"customer-master.xlsx","key":"customer-master.xlsx","kms_key_id":null,"metadata":{},"object_lock_legal_hold_status":"","object_lock_mode":"","object_lock_retain_until_date":"","server_side_encryption":"","source":"resources/customer-master.xlsx","storage_class":"STANDARD","tags":{"Environment":"068009473781-pb-pbmydevsecops5555","Name":"068009473781-pb-pbmydevsecops5555-customer-master"},"version_id":"","website_redirect":""},"after":{"acl":"private","bucket":"068009473781-pb-pbmydevsecops5555-data","cache_control":"","content":null,"content_base64":null,"content_disposition":"","content_encoding":"","content_language":"","content_type":"binary/octet-stream","etag":"e0503b22cec66928e560c4351a091dc3","force_destroy":false,"id":"customer-master.xlsx","key":"customer-master.xlsx","kms_key_id":null,"metadata":{},"object_lock_legal_hold_status":"","object_lock_mode":"","object_lock_retain_until_date":"","server_side_encryption":"","source":"resources/customer-master.xlsx","storage_class":"STANDARD","tags":{"Environment":"068009473781-pb-pbmydevsecops5555","Name":"068009473781-pb-pbmydevsecops5555-customer-master"},"version_id":"","website_redirect":""},"after_unknown":{}}},{"address":"aws_security_group.default","mode":"managed","type":"aws_security_group","name":"default","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"description":"Managed by Terraform","name":"068009473781-pb-pbmydevsecops5555-rds-sg","name_prefix":null,"revoke_rules_on_delete":false,"tags":{"Environment":"068009473781-pb-pbmydevsecops5555","Name":"068009473781-pb-pbmydevsecops5555-rds-sg"},"timeouts":null},"after_unknown":{"arn":true,"egress":true,"id":true,"ingress":true,"owner_id":true,"tags":{},"vpc_id":true}}},{"address":"aws_security_group.web-node","mode":"managed","type":"aws_security_group","name":"web-node","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"description":"068009473781-pb-pbmydevsecops5555 Security Group","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22},{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":80,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":80}],"name":"068009473781-pb-pbmydevsecops5555-sg","name_prefix":null,"revoke_rules_on_delete":false,"tags":null,"timeouts":null},"after_unknown":{"arn":true,"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"id":true,"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"owner_id":true,"vpc_id":true}}},{"address":"aws_security_group_rule.egress","mode":"managed","type":"aws_security_group_rule","name":"egress","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","self":false,"to_port":0,"type":"egress"},"after_unknown":{"cidr_blocks":[false],"id":true,"security_group_id":true,"source_security_group_id":true}}},{"address":"aws_security_group_rule.ingress","mode":"managed","type":"aws_security_group_rule","name":"ingress","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"cidr_blocks":["172.16.0.0/16"],"description":null,"from_port":3306,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","self":false,"to_port":3306,"type":"ingress"},"after_unknown":{"cidr_blocks":[false],"id":true,"security_group_id":true,"source_security_group_id":true}}},{"address":"aws_subnet.eks_subnet1","mode":"managed","type":"aws_subnet","name":"eks_subnet1","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-west-2a","cidr_block":"10.10.10.0/24","map_public_ip_on_launch":true,"outpost_arn":null,"tags":{"Name":"068009473781-pb-pbmydevsecops5555-eks-subnet","kubernetes.io/cluster/068009473781-pb-pbmydevsecops5555-eks":"shared"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"tags":{},"vpc_id":true}}},{"address":"aws_subnet.eks_subnet2","mode":"managed","type":"aws_subnet","name":"eks_subnet2","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-west-2b","cidr_block":"10.10.11.0/24","map_public_ip_on_launch":true,"outpost_arn":null,"tags":{"Name":"068009473781-pb-pbmydevsecops5555-eks-subnet2","kubernetes.io/cluster/068009473781-pb-pbmydevsecops5555-eks":"shared"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"tags":{},"vpc_id":true}}},{"address":"aws_subnet.web_subnet","mode":"managed","type":"aws_subnet","name":"web_subnet","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-west-2a","cidr_block":"172.16.10.0/24","map_public_ip_on_launch":true,"outpost_arn":null,"tags":{"Name":"068009473781-pb-pbmydevsecops5555-subnet"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"tags":{},"vpc_id":true}}},{"address":"aws_subnet.web_subnet2","mode":"managed","type":"aws_subnet","name":"web_subnet2","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-west-2b","cidr_block":"172.16.11.0/24","map_public_ip_on_launch":true,"outpost_arn":null,"tags":{"Name":"068009473781-pb-pbmydevsecops5555-subnet2"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"tags":{},"vpc_id":true}}},{"address":"aws_volume_attachment.ebs_att","mode":"managed","type":"aws_volume_attachment","name":"ebs_att","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"device_name":"/dev/sdh","force_detach":null,"skip_destroy":null,"volume_id":"vol-01a64c37b5281b8da"},"after_unknown":{"id":true,"instance_id":true}}},{"address":"aws_vpc.eks_vpc","mode":"managed","type":"aws_vpc","name":"eks_vpc","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"assign_generated_ipv6_cidr_block":false,"cidr_block":"10.10.0.0/16","enable_dns_hostnames":true,"enable_dns_support":true,"instance_tenancy":"default","tags":{"Name":"068009473781-pb-pbmydevsecops5555-eks-vpc"}},"after_unknown":{"arn":true,"default_network_acl_id":true,"default_route_table_id":true,"default_security_group_id":true,"dhcp_options_id":true,"enable_classiclink":true,"enable_classiclink_dns_support":true,"id":true,"ipv6_association_id":true,"ipv6_cidr_block":true,"main_route_table_id":true,"owner_id":true,"tags":{}}}},{"address":"aws_vpc.web_vpc","mode":"managed","type":"aws_vpc","name":"web_vpc","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"assign_generated_ipv6_cidr_block":false,"cidr_block":"172.16.0.0/16","enable_dns_hostnames":true,"enable_dns_support":true,"instance_tenancy":"default","tags":{"Name":"068009473781-pb-pbmydevsecops5555-vpc"}},"after_unknown":{"arn":true,"default_network_acl_id":true,"default_route_table_id":true,"default_security_group_id":true,"dhcp_options_id":true,"enable_classiclink":true,"enable_classiclink_dns_support":true,"id":true,"ipv6_association_id":true,"ipv6_cidr_block":true,"main_route_table_id":true,"owner_id":true,"tags":{}}}},{"address":"null_resource.push_image","mode":"managed","type":"null_resource","name":"push_image","provider_name":"null","change":{"actions":["delete","create"],"before":{"id":"1707566303421630784","triggers":null},"after":{"triggers":null},"after_unknown":{"id":true}}}],"output_changes":{"db_app_public_dns":{"actions":["create"],"before":null,"after_unknown":true},"db_endpoint":{"actions":["create"],"before":null,"after_unknown":true},"ec2_public_dns":{"actions":["create"],"before":null,"after_unknown":true},"endpoint":{"actions":["create"],"before":null,"after_unknown":true},"kubeconfig-certificate-authority-data":{"actions":["create"],"before":null,"after_unknown":true},"public_subnet":{"actions":["create"],"before":null,"after_unknown":true},"public_subnet2":{"actions":["create"],"before":null,"after_unknown":true},"secret":{"actions":["delete"],"before":null,"after":null,"after_unknown":false},"username":{"actions":["create"],"before":null,"after":"068009473781-pb-pbmydevsecops5555-user","after_unknown":false},"vpc_id":{"actions":["create"],"before":null,"after_unknown":true}},"prior_state":{"format_version":"0.1","terraform_version":"0.12.28","values":{"outputs":{"username":{"sensitive":false,"value":"068009473781-pb-pbmydevsecops5555-user"}},"root_module":{"resources":[{"address":"aws_db_option_group.default","mode":"managed","type":"aws_db_option_group","name":"default","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:rds:us-west-2:068009473781:og:og-068009473781-pb-pbmydevsecops5555","engine_name":"mysql","id":"og-068009473781-pb-pbmydevsecops5555","major_engine_version":"8.0","name":"og-068009473781-pb-pbmydevsecops5555","name_prefix":null,"option":[],"option_group_description":"Terraform OG","tags":{"Environment":"068009473781-pb-pbmydevsecops5555","Name":"068009473781-pb-pbmydevsecops5555-og"},"timeouts":null}},{"address":"aws_db_parameter_group.default","mode":"managed","type":"aws_db_parameter_group","name":"default","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:rds:us-west-2:068009473781:pg:pg-068009473781-pb-pbmydevsecops5555","description":"Terraform PG","family":"mysql8.0","id":"pg-068009473781-pb-pbmydevsecops5555","name":"pg-068009473781-pb-pbmydevsecops5555","name_prefix":null,"parameter":[{"apply_method":"immediate","name":"character_set_client","value":"utf8"},{"apply_method":"immediate","name":"character_set_server","value":"utf8"}],"tags":{"Environment":"068009473781-pb-pbmydevsecops5555","Name":"068009473781-pb-pbmydevsecops5555-pg"}}},{"address":"aws_ebs_snapshot.example_snapshot","mode":"managed","type":"aws_ebs_snapshot","name":"example_snapshot","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:ec2:us-west-2::snapshot/snap-0475e105b5899aa65","data_encryption_key_id":"","description":"068009473781-pb-pbmydevsecops5555-ebs-snapshot","encrypted":false,"id":"snap-0475e105b5899aa65","kms_key_id":"","owner_alias":"","owner_id":"068009473781","tags":{"Name":"068009473781-pb-pbmydevsecops5555-ebs-snapshot"},"timeouts":null,"volume_id":"vol-01a64c37b5281b8da","volume_size":1},"depends_on":["aws_ebs_volume.web_host_storage"]},{"address":"aws_ebs_volume.web_host_storage","mode":"managed","type":"aws_ebs_volume","name":"web_host_storage","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:ec2:us-west-2:068009473781:volume/vol-01a64c37b5281b8da","availability_zone":"us-west-2a","encrypted":false,"id":"vol-01a64c37b5281b8da","iops":100,"kms_key_id":"","multi_attach_enabled":false,"outpost_arn":"","size":1,"snapshot_id":"","tags":{"Name":"068009473781-pb-pbmydevsecops5555-ebs"},"type":"gp2"}},{"address":"aws_ecr_repository.repository","mode":"managed","type":"aws_ecr_repository","name":"repository","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:ecr:us-west-2:068009473781:repository/068009473781-pb-pbmydevsecops5555-repository","id":"068009473781-pb-pbmydevsecops5555-repository","image_scanning_configuration":[{"scan_on_push":false}],"image_tag_mutability":"MUTABLE","name":"068009473781-pb-pbmydevsecops5555-repository","registry_id":"068009473781","repository_url":"068009473781.dkr.ecr.us-west-2.amazonaws.com/068009473781-pb-pbmydevsecops5555-repository","tags":{"Name":"068009473781-pb-pbmydevsecops5555-repository"},"timeouts":null}},{"address":"aws_elasticsearch_domain.monitoring-framework","mode":"managed","type":"aws_elasticsearch_domain","name":"monitoring-framework","provider_name":"aws","schema_version":0,"values":{"access_policies":"{\"Statement\":[{\"Action\":\"es:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Resource\":\"*\",\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}","advanced_options":{"rest.action.multi.allow_explicit_index":"true"},"advanced_security_options":[{"enabled":false,"internal_user_database_enabled":false,"master_user_options":[]}],"arn":"arn:aws:es:us-west-2:068009473781:domain/tg-pbmydevsecops5555-es","cluster_config":[{"dedicated_master_count":0,"dedicated_master_enabled":false,"dedicated_master_type":"","instance_count":1,"instance_type":"t2.small.elasticsearch","warm_count":0,"warm_enabled":false,"warm_type":"","zone_awareness_config":[],"zone_awareness_enabled":false}],"cognito_options":[{"enabled":false,"identity_pool_id":"","role_arn":"","user_pool_id":""}],"domain_endpoint_options":[{"enforce_https":false,"tls_security_policy":"Policy-Min-TLS-1-0-2019-07"}],"domain_id":"068009473781/tg-pbmydevsecops5555-es","domain_name":"tg-pbmydevsecops5555-es","ebs_options":[{"ebs_enabled":true,"iops":0,"volume_size":30,"volume_type":"gp2"}],"elasticsearch_version":"2.3","encrypt_at_rest":[{"enabled":false,"kms_key_id":""}],"endpoint":"search-tg-pbmydevsecops5555-es-xa7tn2nw6mx7aoxovo522pazvm.us-west-2.es.amazonaws.com","id":"arn:aws:es:us-west-2:068009473781:domain/tg-pbmydevsecops5555-es","kibana_endpoint":"search-tg-pbmydevsecops5555-es-xa7tn2nw6mx7aoxovo522pazvm.us-west-2.es.amazonaws.com/_plugin/kibana/","log_publishing_options":[],"node_to_node_encryption":[{"enabled":false}],"snapshot_options":[{"automated_snapshot_start_hour":0}],"tags":{},"timeouts":null,"vpc_options":[]}},{"address":"aws_elasticsearch_domain_policy.monitoring-framework-policy","mode":"managed","type":"aws_elasticsearch_domain_policy","name":"monitoring-framework-policy","provider_name":"aws","schema_version":0,"values":{"access_policies":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Action\":\"es:*\",\"Resource\":\"*\"}]}","domain_name":"tg-pbmydevsecops5555-es","id":"esd-policy-tg-pbmydevsecops5555-es"},"depends_on":["aws_elasticsearch_domain.monitoring-framework"]},{"address":"aws_iam_access_key.user","mode":"managed","type":"aws_iam_access_key","name":"user","provider_name":"aws","schema_version":0,"values":{"encrypted_secret":null,"id":"AKIAQ7VNOG325Y7WF5XN","key_fingerprint":null,"pgp_key":null,"secret":"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","ses_smtp_password":"AiVox4900VikMVa2C4VD5+xBF8BIV8axtDm0y1XkxEdU","ses_smtp_password_v4":"BCmpJZlEDuul7E/tAQYhfmejyptzppGkDE1ZyOJAjHpu","status":"Active","user":"068009473781-pb-pbmydevsecops5555-user"},"depends_on":["aws_iam_user.user"]},{"address":"aws_iam_instance_profile.ec2profile","mode":"managed","type":"aws_iam_instance_profile","name":"ec2profile","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:iam::068009473781:instance-profile/068009473781-pb-pbmydevsecops5555-profile","create_date":"2020-07-27T23:48:36Z","id":"068009473781-pb-pbmydevsecops5555-profile","name":"068009473781-pb-pbmydevsecops5555-profile","name_prefix":null,"path":"/","role":"068009473781-pb-pbmydevsecops5555-role","roles":["068009473781-pb-pbmydevsecops5555-role"],"unique_id":"AIPAQ7VNOG32SCJF57Y6O"},"depends_on":["aws_iam_role.ec2role"]},{"address":"aws_iam_role.ec2role","mode":"managed","type":"aws_iam_role","name":"ec2role","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:iam::068009473781:role/068009473781-pb-pbmydevsecops5555-role","assume_role_policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}","create_date":"2020-07-27T23:48:33Z","description":"","force_detach_policies":false,"id":"068009473781-pb-pbmydevsecops5555-role","max_session_duration":3600,"name":"068009473781-pb-pbmydevsecops5555-role","name_prefix":null,"path":"/","permissions_boundary":null,"tags":{"Environment":"068009473781-pb-pbmydevsecops5555","Name":"068009473781-pb-pbmydevsecops5555-role"},"unique_id":"AROAQ7VNOG32Q7UWHRLRR"}},{"address":"aws_iam_role.iam_for_eks","mode":"managed","type":"aws_iam_role","name":"iam_for_eks","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:iam::068009473781:role/068009473781-pb-pbmydevsecops5555-iam-for-eks","assume_role_policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"eks.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}","create_date":"2020-07-27T23:48:32Z","description":"","force_detach_policies":false,"id":"068009473781-pb-pbmydevsecops5555-iam-for-eks","max_session_duration":3600,"name":"068009473781-pb-pbmydevsecops5555-iam-for-eks","name_prefix":null,"path":"/","permissions_boundary":null,"tags":{},"unique_id":"AROAQ7VNOG32R5D5X7D5M"}},{"address":"aws_iam_role.iam_for_lambda","mode":"managed","type":"aws_iam_role","name":"iam_for_lambda","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:iam::068009473781:role/068009473781-pb-pbmydevsecops5555-analysis-lambda","assume_role_policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}","create_date":"2020-07-27T23:48:32Z","description":"","force_detach_policies":false,"id":"068009473781-pb-pbmydevsecops5555-analysis-lambda","max_session_duration":3600,"name":"068009473781-pb-pbmydevsecops5555-analysis-lambda","name_prefix":null,"path":"/","permissions_boundary":null,"tags":{},"unique_id":"AROAQ7VNOG322JLVBOET2"}},{"address":"aws_iam_role_policy.ec2policy","mode":"managed","type":"aws_iam_role_policy","name":"ec2policy","provider_name":"aws","schema_version":0,"values":{"id":"068009473781-pb-pbmydevsecops5555-role:068009473781-pb-pbmydevsecops5555-policy","name":"068009473781-pb-pbmydevsecops5555-policy","name_prefix":null,"policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"s3:*\",\n        \"ec2:*\",\n        \"rds:*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    }\n  ]\n}\n","role":"068009473781-pb-pbmydevsecops5555-role"},"depends_on":["aws_iam_role.ec2role"]},{"address":"aws_iam_role_policy_attachment.policy_attachment-AmazonEKSClusterPolicy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"policy_attachment-AmazonEKSClusterPolicy","provider_name":"aws","schema_version":0,"values":{"id":"068009473781-pb-pbmydevsecops5555-iam-for-eks-20200727234836030000000002","policy_arn":"arn:aws:iam::aws:policy/AmazonEKSClusterPolicy","role":"068009473781-pb-pbmydevsecops5555-iam-for-eks"},"depends_on":["aws_iam_role.iam_for_eks"]},{"address":"aws_iam_role_policy_attachment.policy_attachment-AmazonEKSServicePolicy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"policy_attachment-AmazonEKSServicePolicy","provider_name":"aws","schema_version":0,"values":{"id":"068009473781-pb-pbmydevsecops5555-iam-for-eks-20200727234836026300000001","policy_arn":"arn:aws:iam::aws:policy/AmazonEKSServicePolicy","role":"068009473781-pb-pbmydevsecops5555-iam-for-eks"},"depends_on":["aws_iam_role.iam_for_eks"]},{"address":"aws_iam_user.user","mode":"managed","type":"aws_iam_user","name":"user","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:iam::068009473781:user/068009473781-pb-pbmydevsecops5555-user","force_destroy":true,"id":"068009473781-pb-pbmydevsecops5555-user","name":"068009473781-pb-pbmydevsecops5555-user","path":"/","permissions_boundary":null,"tags":{"Environment":"068009473781-pb-pbmydevsecops5555","Name":"068009473781-pb-pbmydevsecops5555-user"},"unique_id":"AIDAQ7VNOG32QMFWCIOYE"}},{"address":"aws_iam_user_policy.userpolicy","mode":"managed","type":"aws_iam_user_policy","name":"userpolicy","provider_name":"aws","schema_version":0,"values":{"id":"068009473781-pb-pbmydevsecops5555-user:excess_policy","name":"excess_policy","name_prefix":null,"policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:*\",\n        \"s3:*\",\n        \"lambda:*\",\n        \"cloudwatch:*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    }\n  ]\n}\n","user":"068009473781-pb-pbmydevsecops5555-user"},"depends_on":["aws_iam_user.user"]},{"address":"aws_kms_alias.logs_key_alias","mode":"managed","type":"aws_kms_alias","name":"logs_key_alias","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:kms:us-west-2:068009473781:alias/068009473781-pb-pbmydevsecops5555-logs-bucket-key","id":"alias/068009473781-pb-pbmydevsecops5555-logs-bucket-key","name":"alias/068009473781-pb-pbmydevsecops5555-logs-bucket-key","name_prefix":null,"target_key_arn":"arn:aws:kms:us-west-2:068009473781:key/f381cd7e-b78a-4bcc-a45f-7aac32b01d02","target_key_id":"f381cd7e-b78a-4bcc-a45f-7aac32b01d02"},"depends_on":["aws_kms_key.logs_key"]},{"address":"aws_kms_key.logs_key","mode":"managed","type":"aws_kms_key","name":"logs_key","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:kms:us-west-2:068009473781:key/f381cd7e-b78a-4bcc-a45f-7aac32b01d02","customer_master_key_spec":"SYMMETRIC_DEFAULT","deletion_window_in_days":7,"description":"068009473781-pb-pbmydevsecops5555-logs bucket key","enable_key_rotation":false,"id":"f381cd7e-b78a-4bcc-a45f-7aac32b01d02","is_enabled":true,"key_id":"f381cd7e-b78a-4bcc-a45f-7aac32b01d02","key_usage":"ENCRYPT_DECRYPT","policy":"{\"Id\":\"key-default-1\",\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::068009473781:root\"},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"}],\"Version\":\"2012-10-17\"}","tags":{}}},{"address":"aws_lambda_function.analysis_lambda","mode":"managed","type":"aws_lambda_function","name":"analysis_lambda","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:lambda:us-west-2:068009473781:function:068009473781-pb-pbmydevsecops5555-analysis","dead_letter_config":[],"description":"","environment":[{"variables":{"access_key":"AKIAIOSFODNN7EXAMPLE","secret_key":"wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY"}}],"file_system_config":[],"filename":"resources/lambda_function_payload.zip","function_name":"068009473781-pb-pbmydevsecops5555-analysis","handler":"exports.test","id":"068009473781-pb-pbmydevsecops5555-analysis","invoke_arn":"arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:068009473781:function:068009473781-pb-pbmydevsecops5555-analysis/invocations","kms_key_arn":"","last_modified":"2020-07-27T23:48:43.133+0000","layers":[],"memory_size":128,"publish":false,"qualified_arn":"arn:aws:lambda:us-west-2:068009473781:function:068009473781-pb-pbmydevsecops5555-analysis:$LATEST","reserved_concurrent_executions":-1,"role":"arn:aws:iam::068009473781:role/068009473781-pb-pbmydevsecops5555-analysis-lambda","runtime":"nodejs12.x","s3_bucket":null,"s3_key":null,"s3_object_version":null,"source_code_hash":"Fne61Y/F2pmVywaVqIYcztFMK3LNeMJKpWFNnxDdGTw=","source_code_size":195,"tags":{},"timeout":3,"timeouts":null,"tracing_config":[{"mode":"PassThrough"}],"version":"$LATEST","vpc_config":[]},"depends_on":["aws_iam_role.iam_for_lambda"]},{"address":"aws_s3_bucket.data","mode":"managed","type":"aws_s3_bucket","name":"data","provider_name":"aws","schema_version":0,"values":{"acceleration_status":"","acl":"public-read","arn":"arn:aws:s3:::068009473781-pb-pbmydevsecops5555-data","bucket":"068009473781-pb-pbmydevsecops5555-data","bucket_domain_name":"068009473781-pb-pbmydevsecops5555-data.s3.amazonaws.com","bucket_prefix":null,"bucket_regional_domain_name":"068009473781-pb-pbmydevsecops5555-data.s3.us-west-2.amazonaws.com","cors_rule":[],"force_destroy":true,"grant":[],"hosted_zone_id":"Z3BJ6K6RIION7M","id":"068009473781-pb-pbmydevsecops5555-data","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":null,"region":"us-west-2","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[],"tags":{"Environment":"068009473781-pb-pbmydevsecops5555","Name":"068009473781-pb-pbmydevsecops5555-data"},"versioning":[{"enabled":false,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null}},{"address":"aws_s3_bucket.data_science","mode":"managed","type":"aws_s3_bucket","name":"data_science","provider_name":"aws","schema_version":0,"values":{"acceleration_status":"","acl":"private","arn":"arn:aws:s3:::068009473781-pb-pbmydevsecops5555-data-science","bucket":"068009473781-pb-pbmydevsecops5555-data-science","bucket_domain_name":"068009473781-pb-pbmydevsecops5555-data-science.s3.amazonaws.com","bucket_prefix":null,"bucket_regional_domain_name":"068009473781-pb-pbmydevsecops5555-data-science.s3.us-west-2.amazonaws.com","cors_rule":[],"force_destroy":true,"grant":[],"hosted_zone_id":"Z3BJ6K6RIION7M","id":"068009473781-pb-pbmydevsecops5555-data-science","lifecycle_rule":[],"logging":[{"target_bucket":"068009473781-pb-pbmydevsecops5555-logs","target_prefix":"log/"}],"object_lock_configuration":[],"policy":null,"region":"us-west-2","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[],"tags":{},"versioning":[{"enabled":true,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"depends_on":["aws_kms_key.logs_key","aws_s3_bucket.logs"]},{"address":"aws_s3_bucket.financials","mode":"managed","type":"aws_s3_bucket","name":"financials","provider_name":"aws","schema_version":0,"values":{"acceleration_status":"","acl":"private","arn":"arn:aws:s3:::068009473781-pb-pbmydevsecops5555-financials","bucket":"068009473781-pb-pbmydevsecops5555-financials","bucket_domain_name":"068009473781-pb-pbmydevsecops5555-financials.s3.amazonaws.com","bucket_prefix":null,"bucket_regional_domain_name":"068009473781-pb-pbmydevsecops5555-financials.s3.us-west-2.amazonaws.com","cors_rule":[],"force_destroy":true,"grant":[],"hosted_zone_id":"Z3BJ6K6RIION7M","id":"068009473781-pb-pbmydevsecops5555-financials","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":null,"region":"us-west-2","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[],"tags":{"Environment":"068009473781-pb-pbmydevsecops5555","Name":"068009473781-pb-pbmydevsecops5555-financials"},"versioning":[{"enabled":false,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null}},{"address":"aws_s3_bucket.flowbucket","mode":"managed","type":"aws_s3_bucket","name":"flowbucket","provider_name":"aws","schema_version":0,"values":{"acceleration_status":"","acl":"private","arn":"arn:aws:s3:::068009473781-pb-pbmydevsecops5555-flowlogs","bucket":"068009473781-pb-pbmydevsecops5555-flowlogs","bucket_domain_name":"068009473781-pb-pbmydevsecops5555-flowlogs.s3.amazonaws.com","bucket_prefix":null,"bucket_regional_domain_name":"068009473781-pb-pbmydevsecops5555-flowlogs.s3.us-west-2.amazonaws.com","cors_rule":[],"force_destroy":true,"grant":[],"hosted_zone_id":"Z3BJ6K6RIION7M","id":"068009473781-pb-pbmydevsecops5555-flowlogs","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":null,"region":"us-west-2","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[],"tags":{"Environment":"068009473781-pb-pbmydevsecops5555","Name":"068009473781-pb-pbmydevsecops5555-flowlogs"},"versioning":[{"enabled":false,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null}},{"address":"aws_s3_bucket.logs","mode":"managed","type":"aws_s3_bucket","name":"logs","provider_name":"aws","schema_version":0,"values":{"acceleration_status":"","acl":"log-delivery-write","arn":"arn:aws:s3:::068009473781-pb-pbmydevsecops5555-logs","bucket":"068009473781-pb-pbmydevsecops5555-logs","bucket_domain_name":"068009473781-pb-pbmydevsecops5555-logs.s3.amazonaws.com","bucket_prefix":null,"bucket_regional_domain_name":"068009473781-pb-pbmydevsecops5555-logs.s3.us-west-2.amazonaws.com","cors_rule":[],"force_destroy":true,"grant":[],"hosted_zone_id":"Z3BJ6K6RIION7M","id":"068009473781-pb-pbmydevsecops5555-logs","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":null,"region":"us-west-2","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"arn:aws:kms:us-west-2:068009473781:key/f381cd7e-b78a-4bcc-a45f-7aac32b01d02","sse_algorithm":"aws:kms"}]}]}],"tags":{"Environment":"068009473781-pb-pbmydevsecops5555","Name":"068009473781-pb-pbmydevsecops5555-logs"},"versioning":[{"enabled":true,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"depends_on":["aws_kms_key.logs_key"]},{"address":"aws_s3_bucket.operations","mode":"managed","type":"aws_s3_bucket","name":"operations","provider_name":"aws","schema_version":0,"values":{"acceleration_status":"","acl":"private","arn":"arn:aws:s3:::068009473781-pb-pbmydevsecops5555-operations","bucket":"068009473781-pb-pbmydevsecops5555-operations","bucket_domain_name":"068009473781-pb-pbmydevsecops5555-operations.s3.amazonaws.com","bucket_prefix":null,"bucket_regional_domain_name":"068009473781-pb-pbmydevsecops5555-operations.s3.us-west-2.amazonaws.com","cors_rule":[],"force_destroy":true,"grant":[],"hosted_zone_id":"Z3BJ6K6RIION7M","id":"068009473781-pb-pbmydevsecops5555-operations","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":null,"region":"us-west-2","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[],"tags":{"Environment":"068009473781-pb-pbmydevsecops5555","Name":"068009473781-pb-pbmydevsecops5555-operations"},"versioning":[{"enabled":true,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null}},{"address":"aws_s3_bucket_object.data_object","mode":"managed","type":"aws_s3_bucket_object","name":"data_object","provider_name":"aws","schema_version":0,"values":{"acl":"private","bucket":"068009473781-pb-pbmydevsecops5555-data","cache_control":"","content":null,"content_base64":null,"content_disposition":"","content_encoding":"","content_language":"","content_type":"binary/octet-stream","etag":"e0503b22cec66928e560c4351a091dc3","force_destroy":false,"id":"customer-master.xlsx","key":"customer-master.xlsx","kms_key_id":null,"metadata":{},"object_lock_legal_hold_status":"","object_lock_mode":"","object_lock_retain_until_date":"","server_side_encryption":"","source":"resources/customer-master.xlsx","storage_class":"STANDARD","tags":{"Environment":"068009473781-pb-pbmydevsecops5555","Name":"068009473781-pb-pbmydevsecops5555-customer-master"},"version_id":"","website_redirect":""},"depends_on":["aws_s3_bucket.data"]},{"address":"data.aws_ami.amazon-linux-2","mode":"data","type":"aws_ami","name":"amazon-linux-2","provider_name":"aws","schema_version":0,"values":{"architecture":"x86_64","arn":"arn:aws:ec2:us-west-2::image/ami-07e0762dd335c2557","block_device_mappings":[{"device_name":"/dev/xvda","ebs":{"delete_on_termination":"true","encrypted":"false","iops":"0","snapshot_id":"snap-0f3d031680780b33d","volume_size":"8","volume_type":"standard"},"no_device":"","virtual_name":""}],"creation_date":"2020-06-23T06:08:45.000Z","description":"Amazon Linux 2 AMI 2.0.20200617.0 x86_64 HVM ebs","executable_users":null,"filter":[{"name":"name","values":["amzn2-ami-hvm-*-x86_64-ebs"]},{"name":"owner-alias","values":["amazon"]}],"hypervisor":"xen","id":"ami-07e0762dd335c2557","image_id":"ami-07e0762dd335c2557","image_location":"amazon/amzn2-ami-hvm-2.0.20200617.0-x86_64-ebs","image_owner_alias":"amazon","image_type":"machine","kernel_id":null,"most_recent":true,"name":"amzn2-ami-hvm-2.0.20200617.0-x86_64-ebs","name_regex":null,"owner_id":"137112412989","owners":["amazon"],"platform":null,"product_codes":[],"public":true,"ramdisk_id":null,"root_device_name":"/dev/xvda","root_device_type":"ebs","root_snapshot_id":"snap-0f3d031680780b33d","sriov_net_support":"simple","state":"available","state_reason":{"code":"UNSET","message":"UNSET"},"tags":{},"virtualization_type":"hvm"}},{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_name":"aws","schema_version":0,"values":{"account_id":"068009473781","arn":"arn:aws:iam::068009473781:user/madplatt","id":"2020-07-28 00:05:25.340567 +0000 UTC","user_id":"AIDAQ7VNOG326BMT2KWJK"}},{"address":"data.aws_iam_policy_document.iam_policy_eks","mode":"data","type":"aws_iam_policy_document","name":"iam_policy_eks","provider_name":"aws","schema_version":0,"values":{"id":"189502314","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"eks.amazonaws.com\"\n      }\n    }\n  ]\n}","override_json":null,"policy_id":null,"source_json":null,"statement":[{"actions":["sts:AssumeRole"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":["eks.amazonaws.com"],"type":"Service"}],"resources":[],"sid":""}],"version":"2012-10-17"}},{"address":"data.aws_iam_policy_document.policy","mode":"data","type":"aws_iam_policy_document","name":"policy","provider_name":"aws","schema_version":0,"values":{"id":"3931805674","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"es:*\",\n      \"Resource\": \"*\",\n      \"Principal\": {\n        \"AWS\": \"*\"\n      }\n    }\n  ]\n}","override_json":null,"policy_id":null,"source_json":null,"statement":[{"actions":["es:*"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":["*"],"type":"AWS"}],"resources":["*"],"sid":""}],"version":"2012-10-17"}},{"address":"null_resource.push_image","mode":"managed","type":"null_resource","name":"push_image","provider_name":"null","schema_version":0,"values":{"id":"1707566303421630784","triggers":null},"depends_on":["aws_ecr_repository.repository"],"tainted":true}]}}},"configuration":{"provider_config":{"aws":{"name":"aws","expressions":{"profile":{"references":["var.profile"]},"region":{"references":["var.region"]}}},"aws.plain_text_access_keys_provider":{"name":"aws","alias":"plain_text_access_keys_provider","expressions":{"access_key":{"constant_value":"AKIAQ7VNOG32YP3PSCOY"},"region":{"constant_value":"us-west-1"},"secret_key":{"constant_value":"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"}}}},"root_module":{"outputs":{"db_app_public_dns":{"expression":{"references":["aws_instance.db_app"]},"description":"DB Public DNS name"},"db_endpoint":{"expression":{"references":["aws_db_instance.default"]},"description":"DB Endpoint"},"ec2_public_dns":{"expression":{"references":["aws_instance.web_host"]},"description":"Web Host Public DNS name"},"endpoint":{"expression":{"references":["aws_eks_cluster.eks_cluster"]}},"kubeconfig-certificate-authority-data":{"expression":{"references":["aws_eks_cluster.eks_cluster"]}},"public_subnet":{"expression":{"references":["aws_subnet.web_subnet"]},"description":"The ID of the Public subnet"},"public_subnet2":{"expression":{"references":["aws_subnet.web_subnet2"]},"description":"The ID of the Public subnet"},"secret":{"expression":{"references":["aws_iam_access_key.user"]}},"username":{"expression":{"references":["aws_iam_user.user"]}},"vpc_id":{"expression":{"references":["aws_vpc.web_vpc"]},"description":"The ID of the VPC"}},"resources":[{"address":"aws_db_instance.default","mode":"managed","type":"aws_db_instance","name":"default","provider_config_key":"aws","expressions":{"allocated_storage":{"constant_value":"20"},"apply_immediately":{"constant_value":true},"backup_retention_period":{"constant_value":0},"db_subnet_group_name":{"references":["aws_db_subnet_group.default"]},"engine":{"constant_value":"mysql"},"engine_version":{"constant_value":"8.0"},"identifier":{"references":["local.resource_prefix"]},"instance_class":{"constant_value":"db.t3.micro"},"monitoring_interval":{"constant_value":0},"multi_az":{"constant_value":false},"name":{"references":["var.dbname"]},"option_group_name":{"references":["aws_db_option_group.default"]},"parameter_group_name":{"references":["aws_db_parameter_group.default"]},"password":{"references":["var.password"]},"publicly_accessible":{"constant_value":true},"skip_final_snapshot":{"constant_value":true},"storage_encrypted":{"constant_value":false},"tags":{"references":["local.resource_prefix","local.resource_prefix"]},"username":{"constant_value":"admin"},"vpc_security_group_ids":{"references":["aws_security_group.default"]}},"schema_version":1},{"address":"aws_db_option_group.default","mode":"managed","type":"aws_db_option_group","name":"default","provider_config_key":"aws","expressions":{"engine_name":{"constant_value":"mysql"},"major_engine_version":{"constant_value":"8.0"},"name":{"references":["local.resource_prefix"]},"option_group_description":{"constant_value":"Terraform OG"},"tags":{"references":["local.resource_prefix","local.resource_prefix"]}},"schema_version":0},{"address":"aws_db_parameter_group.default","mode":"managed","type":"aws_db_parameter_group","name":"default","provider_config_key":"aws","expressions":{"description":{"constant_value":"Terraform PG"},"family":{"constant_value":"mysql8.0"},"name":{"references":["local.resource_prefix"]},"parameter":[{"apply_method":{"constant_value":"immediate"},"name":{"constant_value":"character_set_client"},"value":{"constant_value":"utf8"}},{"apply_method":{"constant_value":"immediate"},"name":{"constant_value":"character_set_server"},"value":{"constant_value":"utf8"}}],"tags":{"references":["local.resource_prefix","local.resource_prefix"]}},"schema_version":0},{"address":"aws_db_subnet_group.default","mode":"managed","type":"aws_db_subnet_group","name":"default","provider_config_key":"aws","expressions":{"description":{"constant_value":"Terraform DB Subnet Group"},"name":{"references":["local.resource_prefix"]},"subnet_ids":{"references":["aws_subnet.web_subnet","aws_subnet.web_subnet2"]},"tags":{"references":["local.resource_prefix","local.resource_prefix"]}},"schema_version":0},{"address":"aws_ebs_snapshot.example_snapshot","mode":"managed","type":"aws_ebs_snapshot","name":"example_snapshot","provider_config_key":"aws","expressions":{"description":{"references":["local.resource_prefix"]},"tags":{"references":["local.resource_prefix"]},"volume_id":{"references":["aws_ebs_volume.web_host_storage"]}},"schema_version":0},{"address":"aws_ebs_volume.web_host_storage","mode":"managed","type":"aws_ebs_volume","name":"web_host_storage","provider_config_key":"aws","expressions":{"availability_zone":{"references":["var.availability_zone"]},"size":{"constant_value":1},"tags":{"references":["local.resource_prefix"]}},"schema_version":0},{"address":"aws_ecr_repository.repository","mode":"managed","type":"aws_ecr_repository","name":"repository","provider_config_key":"aws","expressions":{"image_tag_mutability":{"constant_value":"MUTABLE"},"name":{"references":["local.resource_prefix"]},"tags":{"references":["local.resource_prefix"]}},"schema_version":0},{"address":"aws_eks_cluster.eks_cluster","mode":"managed","type":"aws_eks_cluster","name":"eks_cluster","provider_config_key":"aws","expressions":{"name":{"references":["local.eks_name"]},"role_arn":{"references":["aws_iam_role.iam_for_eks"]},"vpc_config":[{"endpoint_private_access":{"constant_value":true},"subnet_ids":{"references":["aws_subnet.eks_subnet1","aws_subnet.eks_subnet2"]}}]},"schema_version":0,"depends_on":["aws_iam_role_policy_attachment.policy_attachment-AmazonEKSClusterPolicy","aws_iam_role_policy_attachment.policy_attachment-AmazonEKSServicePolicy"]},{"address":"aws_elasticsearch_domain.monitoring-framework","mode":"managed","type":"aws_elasticsearch_domain","name":"monitoring-framework","provider_config_key":"aws","expressions":{"cluster_config":[{"dedicated_master_count":{"constant_value":1},"dedicated_master_enabled":{"constant_value":false},"dedicated_master_type":{"constant_value":"m4.large.elasticsearch"},"instance_count":{"constant_value":1},"instance_type":{"constant_value":"t2.small.elasticsearch"}}],"domain_name":{"references":["var.environment"]},"ebs_options":[{"ebs_enabled":{"constant_value":true},"volume_size":{"constant_value":30}}],"elasticsearch_version":{"constant_value":"2.3"}},"schema_version":0},{"address":"aws_elasticsearch_domain_policy.monitoring-framework-policy","mode":"managed","type":"aws_elasticsearch_domain_policy","name":"monitoring-framework-policy","provider_config_key":"aws","expressions":{"access_policies":{"references":["data.aws_iam_policy_document.policy"]},"domain_name":{"references":["aws_elasticsearch_domain.monitoring-framework"]}},"schema_version":0},{"address":"aws_elb.weblb","mode":"managed","type":"aws_elb","name":"weblb","provider_config_key":"aws","expressions":{"connection_draining":{"constant_value":true},"connection_draining_timeout":{"constant_value":400},"cross_zone_load_balancing":{"constant_value":true},"health_check":[{"healthy_threshold":{"constant_value":2},"interval":{"constant_value":30},"target":{"constant_value":"HTTP:8000/"},"timeout":{"constant_value":3},"unhealthy_threshold":{"constant_value":2}}],"idle_timeout":{"constant_value":400},"instances":{"references":["aws_instance.web_host"]},"listener":[{"instance_port":{"constant_value":8000},"instance_protocol":{"constant_value":"http"},"lb_port":{"constant_value":80},"lb_protocol":{"constant_value":"http"}}],"name":{"constant_value":"weblb-terraform-elb"},"security_groups":{"references":["aws_security_group.web-node"]},"subnets":{"references":["aws_subnet.web_subnet"]},"tags":{"constant_value":{"Name":"foobar-terraform-elb"}}},"schema_version":0},{"address":"aws_flow_log.vpcflowlogs","mode":"managed","type":"aws_flow_log","name":"vpcflowlogs","provider_config_key":"aws","expressions":{"log_destination":{"references":["aws_s3_bucket.flowbucket"]},"log_destination_type":{"constant_value":"s3"},"tags":{"references":["local.resource_prefix","local.resource_prefix"]},"traffic_type":{"constant_value":"ALL"},"vpc_id":{"references":["aws_vpc.web_vpc"]}},"schema_version":0},{"address":"aws_iam_access_key.user","mode":"managed","type":"aws_iam_access_key","name":"user","provider_config_key":"aws","expressions":{"user":{"references":["aws_iam_user.user"]}},"schema_version":0},{"address":"aws_iam_instance_profile.ec2profile","mode":"managed","type":"aws_iam_instance_profile","name":"ec2profile","provider_config_key":"aws","expressions":{"name":{"references":["local.resource_prefix"]},"role":{"references":["aws_iam_role.ec2role"]}},"schema_version":0},{"address":"aws_iam_role.ec2role","mode":"managed","type":"aws_iam_role","name":"ec2role","provider_config_key":"aws","expressions":{"assume_role_policy":{"constant_value":"{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Action\": \"sts:AssumeRole\",\n            \"Principal\": {\n               \"Service\": \"ec2.amazonaws.com\"\n            },\n            \"Effect\": \"Allow\",\n            \"Sid\": \"\"\n        }\n    ]\n}\n"},"name":{"references":["local.resource_prefix"]},"path":{"constant_value":"/"},"tags":{"references":["local.resource_prefix","local.resource_prefix"]}},"schema_version":0},{"address":"aws_iam_role.iam_for_eks","mode":"managed","type":"aws_iam_role","name":"iam_for_eks","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.iam_policy_eks"]},"name":{"references":["local.resource_prefix"]}},"schema_version":0},{"address":"aws_iam_role.iam_for_lambda","mode":"managed","type":"aws_iam_role","name":"iam_for_lambda","provider_config_key":"aws","expressions":{"assume_role_policy":{"constant_value":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"lambda.amazonaws.com\"\n      },\n      \"Effect\": \"Allow\",\n      \"Sid\": \"\"\n    }\n  ]\n}\n"},"name":{"references":["local.resource_prefix"]}},"schema_version":0},{"address":"aws_iam_role_policy.ec2policy","mode":"managed","type":"aws_iam_role_policy","name":"ec2policy","provider_config_key":"aws","expressions":{"name":{"references":["local.resource_prefix"]},"policy":{"constant_value":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"s3:*\",\n        \"ec2:*\",\n        \"rds:*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    }\n  ]\n}\n"},"role":{"references":["aws_iam_role.ec2role"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.policy_attachment-AmazonEKSClusterPolicy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"policy_attachment-AmazonEKSClusterPolicy","provider_config_key":"aws","expressions":{"policy_arn":{"constant_value":"arn:aws:iam::aws:policy/AmazonEKSClusterPolicy"},"role":{"references":["aws_iam_role.iam_for_eks"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.policy_attachment-AmazonEKSServicePolicy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"policy_attachment-AmazonEKSServicePolicy","provider_config_key":"aws","expressions":{"policy_arn":{"constant_value":"arn:aws:iam::aws:policy/AmazonEKSServicePolicy"},"role":{"references":["aws_iam_role.iam_for_eks"]}},"schema_version":0},{"address":"aws_iam_user.user","mode":"managed","type":"aws_iam_user","name":"user","provider_config_key":"aws","expressions":{"force_destroy":{"constant_value":true},"name":{"references":["local.resource_prefix"]},"tags":{"references":["local.resource_prefix","local.resource_prefix"]}},"schema_version":0},{"address":"aws_iam_user_policy.userpolicy","mode":"managed","type":"aws_iam_user_policy","name":"userpolicy","provider_config_key":"aws","expressions":{"name":{"constant_value":"excess_policy"},"policy":{"constant_value":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:*\",\n        \"s3:*\",\n        \"lambda:*\",\n        \"cloudwatch:*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    }\n  ]\n}\n"},"user":{"references":["aws_iam_user.user"]}},"schema_version":0},{"address":"aws_instance.db_app","mode":"managed","type":"aws_instance","name":"db_app","provider_config_key":"aws","expressions":{"ami":{"references":["data.aws_ami.amazon-linux-2"]},"iam_instance_profile":{"references":["aws_iam_instance_profile.ec2profile"]},"instance_type":{"constant_value":"t2.nano"},"subnet_id":{"references":["aws_subnet.web_subnet"]},"tags":{"references":["local.resource_prefix"]},"user_data":{"references":["aws_db_instance.default","aws_db_instance.default","var.password","aws_db_instance.default"]},"vpc_security_group_ids":{"references":["aws_security_group.web-node"]}},"schema_version":1},{"address":"aws_instance.web_host","mode":"managed","type":"aws_instance","name":"web_host","provider_config_key":"aws","expressions":{"ami":{"references":["var.ami"]},"instance_type":{"constant_value":"t2.nano"},"subnet_id":{"references":["aws_subnet.web_subnet"]},"tags":{"references":["local.resource_prefix"]},"user_data":{"constant_value":"#! /bin/bash\nsudo apt-get update\nsudo apt-get install -y apache2\nsudo systemctl start apache2\nsudo systemctl enable apache2\nexport AWS_ACCESS_KEY_ID=AKIAIOSFODNN7EXAMAAA\nexport AWS_SECRET_ACCESS_KEY=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\nexport AWS_DEFAULT_REGION=us-west-2\necho \"\u003ch1\u003eDeployed via Terraform\u003c/h1\u003e\" | sudo tee /var/www/html/index.html\n"},"vpc_security_group_ids":{"references":["aws_security_group.web-node"]}},"schema_version":1},{"address":"aws_internet_gateway.web_igw","mode":"managed","type":"aws_internet_gateway","name":"web_igw","provider_config_key":"aws","expressions":{"tags":{"references":["local.resource_prefix"]},"vpc_id":{"references":["aws_vpc.web_vpc"]}},"schema_version":0},{"address":"aws_kms_alias.logs_key_alias","mode":"managed","type":"aws_kms_alias","name":"logs_key_alias","provider_config_key":"aws","expressions":{"name":{"references":["local.resource_prefix"]},"target_key_id":{"references":["aws_kms_key.logs_key"]}},"schema_version":0},{"address":"aws_kms_key.logs_key","mode":"managed","type":"aws_kms_key","name":"logs_key","provider_config_key":"aws","expressions":{"deletion_window_in_days":{"constant_value":7},"description":{"references":["local.resource_prefix"]}},"schema_version":0},{"address":"aws_lambda_function.analysis_lambda","mode":"managed","type":"aws_lambda_function","name":"analysis_lambda","provider_config_key":"aws","expressions":{"environment":[{"variables":{"constant_value":{"access_key":"AKIAIOSFODNN7EXAMPLE","secret_key":"wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY"}}}],"filename":{"constant_value":"resources/lambda_function_payload.zip"},"function_name":{"references":["local.resource_prefix"]},"handler":{"constant_value":"exports.test"},"role":{"references":["aws_iam_role.iam_for_lambda"]},"runtime":{"constant_value":"nodejs12.x"},"source_code_hash":{}},"schema_version":0},{"address":"aws_network_interface.web-eni","mode":"managed","type":"aws_network_interface","name":"web-eni","provider_config_key":"aws","expressions":{"private_ips":{"constant_value":["172.16.10.100"]},"subnet_id":{"references":["aws_subnet.web_subnet"]},"tags":{"references":["local.resource_prefix"]}},"schema_version":0},{"address":"aws_route.public_internet_gateway","mode":"managed","type":"aws_route","name":"public_internet_gateway","provider_config_key":"aws","expressions":{"destination_cidr_block":{"constant_value":"0.0.0.0/0"},"gateway_id":{"references":["aws_internet_gateway.web_igw"]},"route_table_id":{"references":["aws_route_table.web_rtb"]},"timeouts":{"create":{"constant_value":"5m"}}},"schema_version":0},{"address":"aws_route_table.web_rtb","mode":"managed","type":"aws_route_table","name":"web_rtb","provider_config_key":"aws","expressions":{"tags":{"references":["local.resource_prefix"]},"vpc_id":{"references":["aws_vpc.web_vpc"]}},"schema_version":0},{"address":"aws_route_table_association.rtbassoc","mode":"managed","type":"aws_route_table_association","name":"rtbassoc","provider_config_key":"aws","expressions":{"route_table_id":{"references":["aws_route_table.web_rtb"]},"subnet_id":{"references":["aws_subnet.web_subnet"]}},"schema_version":0},{"address":"aws_route_table_association.rtbassoc2","mode":"managed","type":"aws_route_table_association","name":"rtbassoc2","provider_config_key":"aws","expressions":{"route_table_id":{"references":["aws_route_table.web_rtb"]},"subnet_id":{"references":["aws_subnet.web_subnet2"]}},"schema_version":0},{"address":"aws_s3_bucket.data","mode":"managed","type":"aws_s3_bucket","name":"data","provider_config_key":"aws","expressions":{"acl":{"constant_value":"public-read"},"bucket":{"references":["local.resource_prefix"]},"force_destroy":{"constant_value":true},"tags":{"references":["local.resource_prefix","local.resource_prefix"]}},"schema_version":0},{"address":"aws_s3_bucket.data_science","mode":"managed","type":"aws_s3_bucket","name":"data_science","provider_config_key":"aws","expressions":{"acl":{"constant_value":"private"},"bucket":{"references":["local.resource_prefix"]},"force_destroy":{"constant_value":true},"logging":[{"target_bucket":{"references":["aws_s3_bucket.logs"]},"target_prefix":{"constant_value":"log/"}}],"versioning":[{"enabled":{"constant_value":true}}]},"schema_version":0},{"address":"aws_s3_bucket.financials","mode":"managed","type":"aws_s3_bucket","name":"financials","provider_config_key":"aws","expressions":{"acl":{"constant_value":"private"},"bucket":{"references":["local.resource_prefix"]},"force_destroy":{"constant_value":true},"tags":{"references":["local.resource_prefix","local.resource_prefix"]}},"schema_version":0},{"address":"aws_s3_bucket.flowbucket","mode":"managed","type":"aws_s3_bucket","name":"flowbucket","provider_config_key":"aws","expressions":{"bucket":{"references":["local.resource_prefix"]},"force_destroy":{"constant_value":true},"tags":{"references":["local.resource_prefix","local.resource_prefix"]}},"schema_version":0},{"address":"aws_s3_bucket.logs","mode":"managed","type":"aws_s3_bucket","name":"logs","provider_config_key":"aws","expressions":{"acl":{"constant_value":"log-delivery-write"},"bucket":{"references":["local.resource_prefix"]},"force_destroy":{"constant_value":true},"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":{"references":["aws_kms_key.logs_key"]},"sse_algorithm":{"constant_value":"aws:kms"}}]}]}],"tags":{"references":["local.resource_prefix","local.resource_prefix"]},"versioning":[{"enabled":{"constant_value":true}}]},"schema_version":0},{"address":"aws_s3_bucket.operations","mode":"managed","type":"aws_s3_bucket","name":"operations","provider_config_key":"aws","expressions":{"acl":{"constant_value":"private"},"bucket":{"references":["local.resource_prefix"]},"force_destroy":{"constant_value":true},"tags":{"references":["local.resource_prefix","local.resource_prefix"]},"versioning":[{"enabled":{"constant_value":true}}]},"schema_version":0},{"address":"aws_s3_bucket_object.data_object","mode":"managed","type":"aws_s3_bucket_object","name":"data_object","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.data"]},"key":{"constant_value":"customer-master.xlsx"},"source":{"constant_value":"resources/customer-master.xlsx"},"tags":{"references":["local.resource_prefix","local.resource_prefix"]}},"schema_version":0},{"address":"aws_security_group.default","mode":"managed","type":"aws_security_group","name":"default","provider_config_key":"aws","expressions":{"name":{"references":["local.resource_prefix"]},"tags":{"references":["local.resource_prefix","local.resource_prefix"]},"vpc_id":{"references":["aws_vpc.web_vpc"]}},"schema_version":1},{"address":"aws_security_group.web-node","mode":"managed","type":"aws_security_group","name":"web-node","provider_config_key":"aws","expressions":{"description":{"references":["local.resource_prefix"]},"name":{"references":["local.resource_prefix"]},"vpc_id":{"references":["aws_vpc.web_vpc"]}},"schema_version":1,"depends_on":["aws_vpc.web_vpc"]},{"address":"aws_security_group_rule.egress","mode":"managed","type":"aws_security_group_rule","name":"egress","provider_config_key":"aws","expressions":{"cidr_blocks":{"constant_value":["0.0.0.0/0"]},"from_port":{"constant_value":0},"protocol":{"constant_value":"-1"},"security_group_id":{"references":["aws_security_group.default"]},"to_port":{"constant_value":0},"type":{"constant_value":"egress"}},"schema_version":2},{"address":"aws_security_group_rule.ingress","mode":"managed","type":"aws_security_group_rule","name":"ingress","provider_config_key":"aws","expressions":{"cidr_blocks":{"references":["aws_vpc.web_vpc"]},"from_port":{"constant_value":"3306"},"protocol":{"constant_value":"tcp"},"security_group_id":{"references":["aws_security_group.default"]},"to_port":{"constant_value":"3306"},"type":{"constant_value":"ingress"}},"schema_version":2},{"address":"aws_subnet.eks_subnet1","mode":"managed","type":"aws_subnet","name":"eks_subnet1","provider_config_key":"aws","expressions":{"availability_zone":{"references":["var.availability_zone"]},"cidr_block":{"constant_value":"10.10.10.0/24"},"map_public_ip_on_launch":{"constant_value":true},"tags":{"references":["local.resource_prefix","local.eks_name"]},"vpc_id":{"references":["aws_vpc.eks_vpc"]}},"schema_version":1},{"address":"aws_subnet.eks_subnet2","mode":"managed","type":"aws_subnet","name":"eks_subnet2","provider_config_key":"aws","expressions":{"availability_zone":{"references":["var.availability_zone2"]},"cidr_block":{"constant_value":"10.10.11.0/24"},"map_public_ip_on_launch":{"constant_value":true},"tags":{"references":["local.resource_prefix","local.eks_name"]},"vpc_id":{"references":["aws_vpc.eks_vpc"]}},"schema_version":1},{"address":"aws_subnet.web_subnet","mode":"managed","type":"aws_subnet","name":"web_subnet","provider_config_key":"aws","expressions":{"availability_zone":{"references":["var.availability_zone"]},"cidr_block":{"constant_value":"172.16.10.0/24"},"map_public_ip_on_launch":{"constant_value":true},"tags":{"references":["local.resource_prefix"]},"vpc_id":{"references":["aws_vpc.web_vpc"]}},"schema_version":1},{"address":"aws_subnet.web_subnet2","mode":"managed","type":"aws_subnet","name":"web_subnet2","provider_config_key":"aws","expressions":{"availability_zone":{"references":["var.availability_zone2"]},"cidr_block":{"constant_value":"172.16.11.0/24"},"map_public_ip_on_launch":{"constant_value":true},"tags":{"references":["local.resource_prefix"]},"vpc_id":{"references":["aws_vpc.web_vpc"]}},"schema_version":1},{"address":"aws_volume_attachment.ebs_att","mode":"managed","type":"aws_volume_attachment","name":"ebs_att","provider_config_key":"aws","expressions":{"device_name":{"constant_value":"/dev/sdh"},"instance_id":{"references":["aws_instance.web_host"]},"volume_id":{"references":["aws_ebs_volume.web_host_storage"]}},"schema_version":0},{"address":"aws_vpc.eks_vpc","mode":"managed","type":"aws_vpc","name":"eks_vpc","provider_config_key":"aws","expressions":{"cidr_block":{"constant_value":"10.10.0.0/16"},"enable_dns_hostnames":{"constant_value":true},"enable_dns_support":{"constant_value":true},"tags":{"references":["local.resource_prefix"]}},"schema_version":1},{"address":"aws_vpc.web_vpc","mode":"managed","type":"aws_vpc","name":"web_vpc","provider_config_key":"aws","expressions":{"cidr_block":{"constant_value":"172.16.0.0/16"},"enable_dns_hostnames":{"constant_value":true},"enable_dns_support":{"constant_value":true},"tags":{"references":["local.resource_prefix"]}},"schema_version":1},{"address":"null_resource.push_image","mode":"managed","type":"null_resource","name":"push_image","provider_config_key":"null","provisioners":[{"type":"local-exec","expressions":{"command":{"references":["var.region","data.aws_caller_identity.current","var.region","aws_ecr_repository.repository","aws_ecr_repository.repository","local.docker_image","local.docker_image"]},"working_dir":{"references":["path.module"]}}}],"schema_version":0},{"address":"data.aws_ami.amazon-linux-2","mode":"data","type":"aws_ami","name":"amazon-linux-2","provider_config_key":"aws","expressions":{"filter":[{"name":{"constant_value":"owner-alias"},"values":{"constant_value":["amazon"]}},{"name":{"constant_value":"name"},"values":{"constant_value":["amzn2-ami-hvm-*-x86_64-ebs"]}}],"most_recent":{"constant_value":true},"owners":{"constant_value":["amazon"]}},"schema_version":0},{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_config_key":"aws","schema_version":0},{"address":"data.aws_iam_policy_document.iam_policy_eks","mode":"data","type":"aws_iam_policy_document","name":"iam_policy_eks","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"effect":{"constant_value":"Allow"},"principals":[{"identifiers":{"constant_value":["eks.amazonaws.com"]},"type":{"constant_value":"Service"}}]}]},"schema_version":0},{"address":"data.aws_iam_policy_document.policy","mode":"data","type":"aws_iam_policy_document","name":"policy","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["es:*"]},"principals":[{"identifiers":{"constant_value":["*"]},"type":{"constant_value":"AWS"}}],"resources":{"constant_value":["*"]}}]},"schema_version":0}],"variables":{"ami":{"default":"ami-09a5b0b7edf08843d"},"availability_zone":{"default":"us-west-2a"},"availability_zone2":{"default":"us-west-2b"},"company_name":{"default":"acme"},"dbname":{"default":"db1","description":"Name of the Database"},"environment":{"default":"dev"},"password":{"default":"Aa1234321Bb","description":"Database password"},"profile":{"default":"default"},"region":{"default":"us-west-2"}}}}}
